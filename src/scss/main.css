@charset "UTF-8";
/* ============================================================
   BATURA LIBRARY | MASTER ARCHITECTURE
   Professional System Build v7.0 [Modular Design]
   ============================================================ */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;700&family=JetBrains+Mono:wght@300;400;700&display=swap");
/* 
   ============================================================
   BATURA DESIGN SYSTEM | MASTER MANIFEST v7.0
   [LAW:SINGLE_SOURCE_OF_TRUTH] - Dispatcher Core
   ============================================================ 

   [LAW:SEMANTIC_NAMING]
   Именуем по функции, а не по значению.

   [LAW:DETERMINISTIC_SPACING]
   Все зазоры — математическая прогрессия юнита.

   [LAW:GEOMETRIC_COHESION]
   Единство скруглений (Nested Radii).

   [LAW:FLUID_SCALABILITY]
   Использование формул и clamp() вместо px.

   [LAW:MOTION_CHOREOGRAPHY]
   Единая физика и метроном анимаций.

   ============================================================ 
*/
/* ============================================================
   0-SETTINGS / _COLORS.SCSS
   Batura Library | Shader DNA v10.0 [Chromatophores Full]
   ============================================================ */
:root {
  /* --- 1. PRIMITIVES (RGB Triplets for UI) --- */
  --p-black-rgb: 0, 0, 0;
  --p-white-rgb: 255, 255, 255;
  --p-blue-rgb: 0, 102, 255;
  --p-purple-rgb: 157, 0, 255;
  --p-green-rgb: 0, 255, 170;
  --p-red-rgb: 255, 34, 68;
  --p-yellow-rgb: 255, 200, 0;
  --p-cyan-rgb: 0, 230, 255;
  --p-pink-rgb: 255, 0, 150;
  --p-orange-rgb: 255, 100, 0;
  --p-silver-rgb: 180, 190, 210;
  /* --- СЕМАНТИЧЕСКИЕ ПРИВЯЗКИ (Для категорий) --- */
  --p-math-rgb: var(--p-blue-rgb);
  --p-motion-rgb: var(--p-purple-rgb);
  --p-ui-rgb: var(--p-green-rgb);
  --p-workflow-rgb: var(--p-cyan-rgb);
  --p-alert-rgb: var(--p-red-rgb);
  /* --- 2. SHADER DNA (Solid/Deep pairs for Background) --- */
  /* --- 2. SHADER DNA (Calibrated for Readability) --- */
  /* 0: Blue - Сделали чуть глубже (0, 10, 50) */
  --p-blue-solid: rgb(0, 102, 255);
  --p-blue-deep: rgb(0, 10, 50);
  /* 1: Purple - Усилили плотность */
  --p-purple-solid: rgb(157, 0, 255);
  --p-purple-deep: rgb(25, 0, 50);
  /* 2: Green - [FIXED] Теперь воид намного темнее, чтобы не съедал текст */
  --p-green-solid: rgb(0, 255, 150);
  --p-green-deep: rgb(0, 15, 10);
  /* 3: Red - Сохранили твой любимый баланс */
  --p-red-solid: rgb(255, 34, 68);
  --p-red-deep: rgb(40, 0, 5);
  /* 4: Yellow - Сделали воид более "янтарным", чтобы не было каши */
  --p-yellow-solid: rgb(255, 200, 0);
  --p-yellow-deep: rgb(40, 25, 0);
  /* 5: Cyan - [FIXED] Глубокий океанический воид */
  --p-cyan-solid: rgb(0, 230, 255);
  --p-cyan-deep: rgb(0, 15, 25);
  /* 6: Pink - Ядерный неон на темном фоне */
  --p-pink-solid: rgb(255, 0, 150);
  --p-pink-deep: rgb(35, 0, 15);
  /* 7: Orange */
  --p-orange-solid: rgb(255, 100, 0);
  --p-orange-deep: rgb(40, 10, 0);
  /* 8: Silver - Стальной воид */
  --p-silver-solid: rgb(200, 210, 230);
  --p-silver-deep: rgb(20, 22, 28);
  /* --- 3. SEMANTICS --- */
  --theme-accent-rgb: var(--p-blue-rgb);
  --color-bg: rgb(var(--p-black-rgb));
  --color-text-main: rgb(var(--p-white-rgb));
  --color-text-dim: rgba(var(--p-white-rgb), var(--s-text-op-idle));
  --s-text-op-idle: 0.45;
  --s-text-op-hover: 1;
  --m-glass-base-rgb: var(--p-white-rgb);
}

:root {
  /* --- 1. BASE UNIT (4px) --- */
  --unit: 4px;
  /* --- 2. SCALE (Multiples of 4) --- */
  --space-xs: calc(var(--unit) * 2);
  --space-sm: calc(var(--unit) * 4);
  --space-md: calc(var(--unit) * 8);
  --space-lg: calc(var(--unit) * 16);
  --space-xl: calc(var(--unit) * 30);
  /* --- 3. LAYOUT GRID --- */
  --layout-max-width: 1700px;
  --p-site-side: clamp(24px, 5vw, 60px);
  --p-page-bottom: clamp(60px, 10vh, 120px);
  --s-block-gap: clamp(64px, 12vh, 120px);
  --viewport-padding: 120px;
  /* Математические константы ширины для центрирования */
  --stable-content-width: calc(100% - (var(--p-site-side) * 2));
  --stable-max-content: calc(var(--layout-max-width) - (var(--p-site-side) * 2));
  /* --- 4. OPTICAL RHYTHMS --- */
  --p-page-v: clamp(80px, 12vh, 160px);
  --hero-offset: var(--p-page-v);
  --card-content-width: 480px;
}

:root {
  --z-bg: -1;
  --z-app: 1;
  --z-overlay: 90;
  --z-nav: 100;
}

/* ============================================================
   0-SETTINGS / _MOTION.SCSS
   Batura Library | Global Rhythm DNA
   ============================================================ */
:root {
  /* --- 1. DURATIONS (System Beat) --- */
  --d-fast: 0.6s;
  --d-base: 0.8s;
  --d-slow: 1.0s;
  --d-morph: var(--d-slow);
  /* --- 2. EASING (Apple Bezier) --- */
  --e-out: cubic-bezier(0.16, 1, 0.3, 1);
  --e-in-out: cubic-bezier(0.65, 0, 0.35, 1);
  /* --- 3. DYNAMICS --- */
  --entrance-offset: -20px;
  --stagger-step: 0.06s;
  --entrance-delay: 0.2s;
  /* --- 4. OPACITY --- */
  --opacity-hidden: 0;
  --opacity-visible: 1;
  --opacity-muted: 0.5;
  --opacity-faint: 0.3;
  /* --- 5. SCALE & ROTATE --- */
  --scale-press: 0.96;
  --scale-press-strong: 0.94;
  --scale-thumb-hover: 1.2;
  --scale-thumb-active: 1.4;
  --scale-thumb-active-mobile: 1.3;
  --scale-icon-hidden: 0.5;
  --scale-icon-visible: 1;
  --scale-lab-backdrop: 0.98;
  --rotate-icon-hidden: -45deg;
  --rotate-icon-visible: 0deg;
  /* --- 4. MASTER TRANSITIONS (Semantic Shortcuts) --- */
  --t-material: background-color var(--d-fast) ease, box-shadow var(--d-fast) ease;
  --t-text: color var(--d-fast) ease;
  /* Асимметричный вход */
  --t-entrance: opacity var(--d-base) ease, transform var(--d-base) var(--e-out);
}

:root {
  /* --- 1. FONT FAMILIES --- */
  --font-main: "Inter", sans-serif;
  --font-mono: "JetBrains Mono", monospace;
  /* --- 2. FLUID SIZES (clamp engine) --- */
  --fs-h1: clamp(40px, 8vw, 92px);
  --fs-h2: clamp(28px, 4vw, 54px);
  --fs-h3: clamp(18px, 1.5vw, 22px); /* Тот самый промежуточный шаг */
  --fs-body: clamp(12px, 1.1vw, 14px);
  --fs-caption: 11px;
  --fs-data: 10px;
  --fs-code: var(--fs-data);
  /* --- 3. OPTICAL SPACING --- */
  --lh-body: 1.6;
  --lh-tight: 1.1;
  --lh-code: 1.4;
  --ls-caption: 0.15em;
  --ls-data: 0.2em;
  --measure-narrow: 60ch;
}

:root {
  /* --- 1. CORE PHYSICS (Фундамент) --- */
  --s-glass-blur-none: 0px;
  --s-glass-blur: 3px;
  --s-glass-blur-strong: 15px;
  --s-glass-blur-intense: 45px;
  --s-stroke-width: 0.5px;
  /* --- 2. MATERIAL DENSITY (Прозрачность фона) --- */
  --s-glass-op-base: 0.005;
  --s-glass-op-hover: 0.02;
  --s-glass-op-active: 0.02;
  /* --- 3. STROKE INTENSITY (Прозрачность обводки) --- */
  --s-stroke-op-idle: 0.15;
  --s-stroke-op-hover: 0.40;
  --s-stroke-op-active: 0.98;
  /* --- 4. GLARE (Световой слой) --- */
  --s-glare-op-hover: 0.03;
  --s-glare-op-active: 0.03;
  /* --- 5. PATTERN --- */
  --m-dot-size: 1px;
  --m-dot-op: 0.02;
  --m-dot-layer-op: 0.15;
}

/* iOS Safari: стабилизируем hairline, чтобы не было "рваной" обводки */
@supports (-webkit-touch-callout: none) {
  :root {
    --s-stroke-width: 0.75px;
  }
}
:root {
  /* --- 1. MASTER RADII --- */
  --radius-master: 45px;
  --p-card: var(--space-md);
  /* Закон [LAW:GEOMETRIC_COHESION]: Вложенные радиусы */
  --radius-inner: calc(var(--radius-master) - var(--p-card));
  /* --- 2. DYNAMICS --- */
  --card-grow-base: 1;
  --card-grow-active: 9;
  --card-grow-active-hover: 11.4;
  /* --- 3. OPTICAL COMPENSATION --- */
  --logo-balance-x: -10%;
  --text-offset-hero: -0.075em;
  --text-offset-heading: -0.065em;
  --opt-edge-gap: 1px;
  --opt-edge-clip: 0.5px;
  --opt-z-fix: 0.1px;
  --opt-text-nudge: 1px;
  --opt-info-shift: -5px;
  --opt-touch-pad: 10px;
  /* --- 4. VIRTUAL VIEWPORT --- */
  --viewport-overscan: 100px;
  --viewport-overscan-double: 200px;
  /* --- 5. LAB LAYOUT --- */
  --lab-panel-left-w: 380px;
  --lab-panel-right-w: 420px;
  --lab-mobile-preview-vh: 45dvh;
  --lab-mobile-offset: 20px;
  --lab-mobile-panel-pad: 140px;
  /* --- 6. ACCORDION DIMENSIONS --- */
  --accordion-height-min: 500px;
  --accordion-height-max: 750px;
  --accordion-height-min-mobile: 600px;
  --accordion-height-max-mobile: 850px;
  --accordion-tab-min: 60px;
  --accordion-tab-min-mobile: 55px;
  --accordion-tab-radius: 100px;
  --accordion-flex-mobile-active: 7.5;
  /* --- 7. CATALOG GRID --- */
  --catalog-card-min: 320px;
  /* --- 8. CODE BOX --- */
  --codebox-min-h: calc(var(--unit) * 60);
  --codebox-max-h: clamp(220px, 32vh, 360px);
  /* --- 9. ALPHABET NAV --- */
  --alphabet-nav-top: 150px;
  --alphabet-nav-min-w: 40px;
  --alphabet-nav-line-w: 24px;
  --alphabet-nav-line-h: 1px;
  --alphabet-nav-line-w-short: 12px;
}

/* Обновленные переменные в :root для управления навбаром */
:root {
  --nav-h-start: 56px;
  --nav-h-morph: 56px;
  --nav-radius: var(--radius-master);
  --nav-content-scale: 0.7;
  --nav-h: var(--nav-h-start);
  --nav-content-h: calc(var(--nav-h) * var(--nav-content-scale));
  --nav-pad: calc((var(--nav-h) - var(--nav-content-h)) / 2);
  --nav-w-start: 1;
  --nav-w-morph: 0.98;
  --nav-w-factor: var(--nav-w-start);
  --nav-blur-start: var(--s-glass-blur);
  --nav-search-w-idle: clamp(160px, 18vw, 240px);
  --nav-search-w-focus: clamp(220px, 25vw, 360px);
  --nav-top: var(--space-sm);
  --z-nav: 1000;
  --d-morph: var(--d-base);
}

:root {
  /* --- 1. UI MASTER DIMENSIONS (Source of Truth) --- */
  /* Это главная ручка управления всеми кнопками в системе */
  --ui-h-btn-master: clamp(36px, 4.5vh, 48px);
  /* --- 2. BUTTON DERIVATIVES --- */
  /* Ссылаемся на мастер-высоту, чтобы не дублировать clamp */
  --ui-h-btn: var(--ui-h-btn-master);
  /* [WARNING: LILITH] Нижний порог 9px — это грань читаемости. 
     Для JetBrains Mono это терпимо, но следи за контрастом. */
  --ui-fs-btn: clamp(9px, 0.7vw, 11px);
  /* Твои горизонтальные "уши" */
  --ui-p-btn: clamp(20px, 2.5vw, 32px);
  /* Автоматический расчет радиуса таблетки (Pill-shape) */
  --ui-radius-btn: calc(var(--ui-h-btn) / 2);
  /* --- 3. INPUTS & NAVIGATION --- */
  --ui-fs-search: calc(var(--nav-h-start) * 0.28);
  /* --- 4. RANGE CONTROL --- */
  --ui-range-h: 20px;
  --ui-range-track-h: 2px;
  --ui-range-thumb: 12px;
  --ui-range-thumb-mobile: 14px;
  --ui-range-h-mobile: 40px;
  --ui-range-thumb-offset: -5px;
  /* --- 5. LAB PREVIEW --- */
  --lab-preview-layer-size: clamp(120px, 18vw, 180px);
  --lab-preview-layer-radius: calc(var(--radius-master) * 0.5);
  --lab-preview-layer-gap: var(--space-xs);
  --lab-preview-step: var(--lab-preview-layer-size);
  --lab-preview-mult: 1;
  --lab-preview-scale-boost: 1;
  --lab-preview-scale-speed: 3;
  --lab-preview-motion: clamp(24px, 4vw, 60px);
}

/* 
   ПРИМЕЧАНИЕ: 
   Все переменные объявлены внутри соответствующих файлов в блоках :root.
   Порядок импорта критичен для работы зависимостей (например, UI зависит от Spacing).
*/
/* ============================================================
   1-GENERIC / _RESET.SCSS
   Batura Library | Master System v7.3 [Virtual Viewport Overscan]
   ============================================================ */
/* [RULE:BOX_MODEL] */
*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  /* 
     VIRTUAL BUFFER STRATEGY: 
     Расширяем логическую область документа вверх на 100px.
     Это создает "безопасную зону" для расчетов backdrop-filter.
  */
  padding-top: var(--viewport-overscan);
  margin-top: calc(var(--viewport-overscan) * -1);
  width: 100%;
  /* Высота + компенсация буфера */
  min-height: calc(100% + var(--viewport-overscan));
  overflow-x: hidden;
  /* Базовая подложка должна быть темной (под цвет темы) */
  background-color: var(--p-blue-deep);
  scrollbar-gutter: stable;
  -webkit-text-size-adjust: 100%;
  scrollbar-width: none;
  -ms-overflow-style: none;
  scroll-behavior: auto;
  height: -webkit-fill-available;
}
html::-webkit-scrollbar {
  display: none;
}

body {
  width: 100%;
  min-height: 100vh;
  /* body прозрачный, чтобы сквозь него просвечивал канвас в зоне буфера */
  background-color: transparent !important;
  color: var(--color-text-main);
  font-family: var(--font-main);
  font-size: var(--fs-body);
  line-height: var(--lh-body);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Важно для работы Lenis в расширенном вьюпорте */
  overflow-y: visible;
  overflow-x: hidden;
  overscroll-behavior-y: none;
}

/* Верхний "edge-guard" слой против окраски окна */
/* 
   LAYER: BACKGROUND (Three.js Shader Sync)
   Канвас теперь физически начинается в начале виртуального буфера (-100px).
*/
#liquid-bg-canvas {
  position: fixed;
  /* Отрисовываем шейдер за пределами видимости */
  top: calc(var(--viewport-overscan) * -1);
  left: calc(var(--viewport-overscan) * -1);
  width: calc(100vw + var(--viewport-overscan-double));
  height: calc(100vh + var(--viewport-overscan-double));
  z-index: -1;
  pointer-events: none;
  /* Аппаратная стабилизация */
  transform: translateZ(0);
  will-change: transform;
}

/* 
   BACKDROP FIX: 
   Дополнительный слой-заглушка под канвасом 
*/
#viewport-backdrop {
  position: fixed;
  /* Тоже расширяем вверх */
  top: calc(var(--viewport-overscan) * -1);
  left: 0;
  right: 0;
  bottom: 0;
  height: calc(100vh + var(--viewport-overscan));
  z-index: -2;
  background: var(--color-bg, #000);
  pointer-events: none;
  transform: translateZ(0);
}

/* Контентная обертка */
#app-wrapper,
main {
  position: relative;
  /* Благодаря padding-top: 100px у html, контент начнется точно на y: 0 для юзера */
  z-index: 1;
}

/* СБРОС ИНТЕРАКТИВНЫХ ЭЛЕМЕНТОВ */
a {
  text-decoration: none;
  color: inherit;
  outline: none;
  cursor: pointer;
}

button,
input,
textarea,
select {
  font-family: inherit;
  font-size: inherit;
  background: none;
  border: none;
  padding: 0;
  outline: none;
  color: inherit;
}

button {
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
}

/* IMAGE RESET */
img, svg {
  display: block;
  max-width: 100%;
  height: auto;
}

/* ============================================================
   2-ELEMENTS / _BASE.SCSS
   Batura Library | Master System v7.2 [PC Blur Stability Fix]
   ============================================================ */
body {
  /* 
     body остается прозрачным. Цвет фона должен быть задан ТОЛЬКО в html.
     Это позволяет backdrop-filter видеть canvas, который лежит под body.
  */
  background-color: transparent;
  color: var(--color-text-main);
  font-family: var(--font-main);
  min-height: 100vh;
  width: 100%;
  /* Оптимизация рендеринга слоев для PC */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

main {
  position: relative;
  z-index: var(--z-app);
  width: 100%;
  /* 
     ГЛАВНЫЙ ФИКС ДЛЯ PC (Chrome Edge-Bleeding):
     Добавляем 1px отступа сверху. Это разрывает контакт между блюром 
     карточек и физической рамой окна браузера. 
     Теперь при масштабировании (Zoom) блюр будет видеть 1px твоего шейдера 
     сверху, а не серую/белую полосу интерфейса Chrome.
  */
  /* Принудительная стабилизация GPU слоя, чтобы не было "дребезга" при зуме */
  transform: translateZ(0);
}

canvas {
  /* Убираем инлайновые зазоры и фиксируем как блок */
  display: block;
}

section {
  position: relative;
  width: 100%;
}

/* ============================================================
   2-ELEMENTS / _TEXT.SCSS
   Batura Library | Dynamic Typography v7.5
   ============================================================ */
.ui-range__header .value, .text-subheading, .ui-instruction__title, .text-data, .b-code-box__content, .ui-info-tag, .ui-range__header, .b-catalog-header .index, .b-alphabet-nav__char, .b-static-card__index, .b-accordion .b-static-card__deco, .b-accordion .b-static-card__index, .ui-button, .ui-button.is-full-width, .ui-tabs-group .ui-button, .b-navbar__search input, small, .text-body, .ui-instruction .text-info-hint, p, .text-heading, h2, .text-hero, h1 {
  margin: 0;
  color: rgba(var(--p-white-rgb), var(--_text-op, 1));
  transition: color var(--d-fast) var(--e-out);
  transition-delay: inherit;
}

.text-hero, h1 {
  font-family: var(--font-main);
  font-size: var(--fs-h1);
  font-weight: 200;
  line-height: 0.95;
  letter-spacing: -0.04em;
  text-transform: uppercase;
  margin-left: var(--text-offset-hero);
}

.text-heading, h2 {
  font-family: var(--font-main);
  font-size: var(--fs-h2);
  font-weight: 200;
  line-height: 1.1;
  letter-spacing: -0.03em;
  text-transform: uppercase;
  margin-left: var(--text-offset-heading);
}

.text-body, .ui-instruction .text-info-hint, p {
  --_text-op: var(--s-text-op-idle);
  font-family: var(--font-main);
  font-size: var(--fs-body);
  font-weight: 300;
  line-height: var(--lh-body);
  max-width: 55ch;
  -webkit-font-smoothing: antialiased;
}

/* DATA: Индексы и технические теги */
.text-data, .b-code-box__content, .ui-info-tag, .ui-range__header, .b-catalog-header .index, .b-alphabet-nav__char, .b-static-card__index, .b-accordion .b-static-card__deco, .b-accordion .b-static-card__index, .ui-button, .ui-button.is-full-width, .ui-tabs-group .ui-button, .b-navbar__search input, small {
  font-family: var(--font-mono);
  font-size: var(--fs-data); /* Привязка к токену 10px */
  font-weight: 300; /* Оставляем легкое начертание */
  line-height: 1;
  letter-spacing: var(--ls-data); /* Привязка к токену 0.2em */
  text-transform: uppercase;
  /* Рендеринг для мелкого Mono текста */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* По умолчанию индекс чуть тусклее основного контента */
  --_text-op: var(--s-text-op-idle);
}

.text-subheading, .ui-instruction__title {
  font-family: var(--font-main);
  font-size: var(--fs-h3); /* Используем новый токен */
  font-weight: 200; /* Чуть легче, чем основной заголовок */
  line-height: 0.95;
  letter-spacing: -0.04em; /* Меньше отрицания, чем в больших заголовках */
  text-transform: uppercase;
  margin-left: var(--text-offset-hero); /* Сохраняем вертикальную ось */ /* Приглушаем по кодексу (Hierarchy) */
}

.text-accent {
  color: rgb(var(--theme-accent-rgb));
  --_text-op: 1;
}

/* ============================================================
   3-OBJECTS / _LAYOUT.SCSS
   Batura Library | System v20.3 [Stable Geometry Fix]
   ============================================================ */
/**
 * 1. FLOW ENGINE
 */
.l-flow {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
.l-flow > * + * {
  margin-top: var(--space-md);
}
.l-flow > .text-data + .text-hero, .l-flow > .b-code-box__content + .text-hero, .l-flow > .ui-info-tag + .text-hero, .l-flow > .ui-range__header + .text-hero, .b-catalog-header .l-flow > .index + .text-hero, .l-flow > .b-alphabet-nav__char + .text-hero, .l-flow > .b-static-card__index + .text-hero, .b-accordion .l-flow > .b-static-card__deco + .text-hero, .l-flow > .ui-button + .text-hero, .b-navbar__search .l-flow > input + .text-hero, .l-flow > small + .text-hero, .l-flow > .text-data + h1, .l-flow > .b-code-box__content + h1, .l-flow > .ui-info-tag + h1, .l-flow > .ui-range__header + h1, .b-catalog-header .l-flow > .index + h1, .l-flow > .b-alphabet-nav__char + h1, .l-flow > .b-static-card__index + h1, .b-accordion .l-flow > .b-static-card__deco + h1, .l-flow > .ui-button + h1, .b-navbar__search .l-flow > input + h1, .l-flow > small + h1, .l-flow > .text-data + .text-heading, .l-flow > .b-code-box__content + .text-heading, .l-flow > .ui-info-tag + .text-heading, .l-flow > .ui-range__header + .text-heading, .b-catalog-header .l-flow > .index + .text-heading, .l-flow > .b-alphabet-nav__char + .text-heading, .l-flow > .b-static-card__index + .text-heading, .b-accordion .l-flow > .b-static-card__deco + .text-heading, .l-flow > .ui-button + .text-heading, .b-navbar__search .l-flow > input + .text-heading, .l-flow > small + .text-heading, .l-flow > .text-data + h2, .l-flow > .b-code-box__content + h2, .l-flow > .ui-info-tag + h2, .l-flow > .ui-range__header + h2, .b-catalog-header .l-flow > .index + h2, .l-flow > .b-alphabet-nav__char + h2, .l-flow > .b-static-card__index + h2, .b-accordion .l-flow > .b-static-card__deco + h2, .l-flow > .ui-button + h2, .b-navbar__search .l-flow > input + h2, .l-flow > small + h2, .l-flow > .text-hero + .text-body, .ui-instruction .l-flow > .text-hero + .text-info-hint, .l-flow > h1 + .text-body, .ui-instruction .l-flow > h1 + .text-info-hint, .l-flow > .text-hero + p, .l-flow > h1 + p, .l-flow > .text-heading + .text-body, .ui-instruction .l-flow > .text-heading + .text-info-hint, .l-flow > h2 + .text-body, .ui-instruction .l-flow > h2 + .text-info-hint, .l-flow > .text-heading + p, .l-flow > h2 + p {
  margin-top: var(--space-xs);
}
.l-flow > .text-body + .l-flex-group, .ui-instruction .l-flow > .text-info-hint + .l-flex-group, .l-flow > p + .l-flex-group {
  margin-top: var(--space-lg);
}

/**
 * 2. UNIVERSAL FLEX OBJECTS
 */
.l-flex-group {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
  align-items: flex-start;
  width: 100%;
}

/**
 * 3. APP STRUCTURE
 */
#app-wrapper {
  width: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  align-items: center;
  /* Оставляем изоляцию - она помогла блюру */
  isolation: isolate;
  transition: opacity var(--d-slow) var(--e-out);
}

#app-root {
  display: flex;
  flex-direction: column;
  width: 100%;
  min-height: 100vh;
  /* 
     ЭТО ПОФИКСИЛО БЛЮР:
     Микро-зазор в 1px и обрезка 0.5px. 
     Это разрывает контакт блюра с "серым краем" браузера.
  */
  margin-top: var(--opt-edge-gap);
  -webkit-clip-path: inset(var(--opt-edge-clip) 0 0 0);
          clip-path: inset(var(--opt-edge-clip) 0 0 0);
  padding-top: calc(var(--nav-h) + var(--nav-top) + var(--hero-offset));
  padding-bottom: var(--p-page-bottom);
  gap: var(--s-block-gap);
  box-sizing: border-box;
}

/**
 * 4. LAB SYSTEM INTERFACE (SKELETON)
 */
body .l-lab-interface {
  position: fixed;
  /* 
     ВОЗВРАЩАЕМ НА МЕСТО: 
     Если лаба была слишком высоко, значит она попала под действие 
     отрицательных марджинов. Ставим честный 0 или -1px.
  */
  top: 0;
  left: 50%;
  z-index: var(--z-overlay);
  width: min(var(--stable-content-width), var(--stable-max-content));
  height: calc(100vh - var(--nav-top));
  margin: 0;
  padding: 0;
  display: grid;
  grid-template-columns: var(--lab-panel-left-w) 1fr var(--lab-panel-right-w);
  /* contain: paint может скрывать навбар, если он перекрывается. 
     Используем только для лабы */
  contain: paint;
  overflow: hidden;
}
@supports (-webkit-touch-callout: none) {
  body .l-lab-interface {
    contain: none;
  }
}

/**
 * 5. NAVBAR FIX
 * Если навбар пропал, нужно убедиться, что он не "улетел" выше окна.
 */
batura-navbar {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: var(--z-nav);
}

/**
 * 6. CONTAINERS
 */
.l-container {
  width: 100%;
  max-width: var(--layout-max-width);
  margin-inline: auto;
  padding-inline: var(--p-site-side);
  box-sizing: border-box;
  position: relative;
}

/**
 * 7. EXPRESSIONS CATALOG SYSTEM
 */
.l-grid-expressions {
  display: grid;
  align-items: stretch;
  grid-template-columns: repeat(auto-fill, minmax(min(100%, var(--catalog-card-min)), 1fr));
  gap: var(--space-md);
  width: 100%;
  /* Изоляция помогла карточкам не "грязнить" */
  isolation: isolate;
}
@media (max-width: 500px) {
  .l-grid-expressions {
    grid-template-columns: 1fr;
    gap: var(--space-sm);
  }
}

#expressionsGrid {
  display: flex;
  flex-direction: column;
  gap: var(--space-xl);
  width: 100%;
}

/* УДАЛЯЕМ viewport-proxy, он больше не нужен, раз clip-path сработал */
/* ============================================================
   5-COMPONENTS / _NAVBAR.SCSS
   Batura Library | System Synced v14.6 [Lab-Resonance Fix]
   ============================================================ */
.b-navbar {
  /* 1. LOCAL TOKENS & GEOMETRY */
  --nav-radius: var(--radius-master);
  --nav-h: var(--nav-h-start);
  --nav-w-factor: var(--nav-w-start);
  --nav-content-h: calc(var(--nav-h) * var(--nav-content-scale));
  --nav-pad: calc((var(--nav-h) - var(--nav-content-h)) / 2);
  --nav-inner-radius: calc(var(--nav-radius) - var(--nav-pad));
  /* 2. INTERACTION DNA */
  --_bg-op: var(--s-glass-op-base);
  --_stroke-op: var(--s-stroke-op-idle);
  position: relative;
  border-radius: var(--nav-radius);
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  position: fixed;
  top: var(--nav-top);
  z-index: var(--z-nav);
  inset-inline: 0;
  margin-inline: auto;
  height: var(--nav-h);
  width: calc(var(--nav-w-factor) * min(var(--stable-content-width), var(--stable-max-content)));
  padding-inline: var(--nav-pad);
  display: flex;
  align-items: center;
  justify-content: space-between;
  transform: translate3d(0, 0, var(--opt-z-fix));
  backface-visibility: hidden;
  transition: height var(--d-morph) var(--e-out), width var(--d-morph) var(--e-out), padding var(--d-morph) var(--e-out), background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: height var(--d-morph) var(--e-out), width var(--d-morph) var(--e-out), padding var(--d-morph) var(--e-out), background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out);
  transition: height var(--d-morph) var(--e-out), width var(--d-morph) var(--e-out), padding var(--d-morph) var(--e-out), background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  /* 3. HOVER OVER NAVBAR (General Active) */
  /* 4. MORPH STATE: SCROLL & LAB */
  /* 5. LAB INTERFACE RESONANCE (Desktop Only) */
  /* 6. ВНУТРЕННИЕ МОДУЛИ */
  /* ============================================================
     7. ПОИСКОВЫЙ МОДУЛЬ (Search Module) | Contextual Physics
     ============================================================ */
  /* Mobile: match desktop hover/active behavior */
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .b-navbar {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.b-navbar::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
.b-navbar:hover {
  --_bg-op: var(--s-glass-op-active);
  --_stroke-op: var(--s-stroke-op-active);
}
body.is-scrolled .b-navbar, body.is-lab-active .b-navbar {
  --nav-h: var(--nav-h-morph);
  --nav-w-factor: var(--nav-w-morph);
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-hover);
}
body.is-scrolled .b-navbar .ui-button:not(:hover):not(:focus), body.is-scrolled .b-navbar__search input:not(:hover):not(:focus), body.is-lab-active .b-navbar .ui-button:not(:hover):not(:focus), body.is-lab-active .b-navbar__search input:not(:hover):not(:focus) {
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-hover);
  --_text-op: var(--s-text-op-hover);
}
@media (min-width: 1101px) {
  body.is-lab-active:has(.l-lab-interface:hover) .b-navbar {
    --_bg-op: var(--s-glass-op-active);
    --_stroke-op: var(--s-stroke-op-active);
  }
}
.b-navbar__brand {
  display: flex;
  align-items: center;
  flex-shrink: 0;
  height: var(--nav-content-h);
  width: var(--nav-content-h);
}
.b-navbar__search {
  --_search-w-idle: var(--nav-search-w-idle);
  --_search-w-focus: var(--nav-search-w-focus);
  --_icon-size: calc(var(--nav-content-h) * 0.45);
  --_icon-stroke: var(--s-stroke-width);
  display: flex;
  align-items: center;
  justify-content: center;
  height: var(--nav-content-h);
  margin-left: auto;
  position: relative;
  transition: transform var(--d-fast) var(--e-out);
  /* MORPH: Кнопка Лаборатории (Состояние Поиска в Лабе) */
}
.b-navbar__search.is-hidden {
  display: none;
}
.b-navbar__search input {
  border: none;
  position: relative;
  border-radius: var(--nav-inner-radius);
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  height: var(--nav-content-h);
  width: var(--_search-w-idle);
  padding-inline: var(--space-sm);
  outline: none;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
  --_bg-op: var(--s-glass-op-base);
  --_stroke-op: var(--s-stroke-op-idle);
  --_text-op: var(--s-text-op-idle);
  color: rgba(var(--p-white-rgb), var(--_text-op));
  transition: width var(--d-slow) var(--e-out), background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), color var(--d-fast) var(--e-out);
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .b-navbar__search input {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.b-navbar__search input::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
.b-navbar__search input::-moz-placeholder {
  color: rgba(var(--p-white-rgb), var(--s-text-op-idle));
  opacity: var(--opacity-muted);
}
.b-navbar__search input::placeholder {
  color: rgba(var(--p-white-rgb), var(--s-text-op-idle));
  opacity: var(--opacity-muted);
}
.b-navbar__search input:hover, .b-navbar__search input:focus {
  --_bg-op: var(--s-glass-op-active);
  --_stroke-op: var(--s-stroke-op-active);
  --_text-op: 1;
}
.b-navbar__search input:focus {
  width: var(--_search-w-focus);
}
.b-navbar__search .close-icon {
  position: absolute;
  right: calc((var(--nav-content-h) - var(--_icon-size)) / 2);
  width: var(--_icon-size);
  height: var(--_icon-size);
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  opacity: var(--opacity-hidden);
  transform: scale(var(--scale-icon-hidden)) rotate(var(--rotate-icon-hidden));
  color: rgba(var(--p-white-rgb), var(--_text-op));
  z-index: 5;
  transition: transform var(--d-fast) var(--e-out), opacity var(--d-fast) var(--e-out), color var(--d-fast) var(--e-out);
}
.b-navbar__search .close-icon svg {
  width: 100%;
  height: 100%;
  display: block;
  fill: none;
}
.b-navbar__search .close-icon svg path, .b-navbar__search .close-icon svg line, .b-navbar__search .close-icon svg circle {
  stroke: currentColor;
  stroke-width: var(--_icon-stroke);
  vector-effect: non-scaling-stroke;
}
body.is-lab-active .b-navbar__search {
  cursor: pointer;
}
body.is-lab-active .b-navbar__search:active {
  transform: scale(var(--scale-press));
  transition-duration: 0.1s;
}
body.is-lab-active .b-navbar__search input {
  width: var(--nav-content-h);
  padding: 0;
  cursor: pointer;
  color: transparent;
  --_stroke-op: var(--s-stroke-op-active);
}
body.is-lab-active .b-navbar__search input::-moz-placeholder {
  opacity: var(--opacity-hidden);
}
body.is-lab-active .b-navbar__search input::placeholder {
  opacity: var(--opacity-hidden);
}
body.is-lab-active .b-navbar__search .close-icon {
  pointer-events: none;
  opacity: var(--opacity-visible);
  transform: scale(var(--scale-icon-visible)) rotate(var(--rotate-icon-visible));
  --_text-op: 1;
}
body.is-lab-active .b-navbar__search.is-pressed .close-icon {
  transform: scale(calc(var(--scale-icon-visible) * var(--scale-press))) rotate(var(--rotate-icon-visible));
  transition-duration: 0.1s;
}
@media (max-width: 1100px) {
  body.is-lab-active .b-navbar {
    --_bg-op: var(--s-glass-op-active);
    --_stroke-op: var(--s-stroke-op-active);
  }
  body.is-lab-active .b-navbar .ui-button, body.is-lab-active .b-navbar__search input {
    --_bg-op: var(--s-glass-op-hover);
    --_stroke-op: var(--s-stroke-op-hover);
    --_text-op: var(--s-text-op-hover);
  }
}

/* ============================================================
   5-COMPONENTS / _BUTTON.SCSS (Fixed Centering & Jitter)
   Batura Library | Unified Button v24.4 [Clean Center]
   ============================================================ */
.ui-button, .ui-button.is-full-width, .ui-tabs-group .ui-button {
  text-decoration: none;
  color: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
  -webkit-tap-highlight-color: transparent;
  /* 1. ГЕОМЕТРИЯ */
  --btn-h: var(--ui-h-btn-master);
  --btn-radius: calc(var(--radius-master) * 0.4);
  width: auto;
  min-width: 0;
  padding-inline: var(--ui-p-btn);
  /* Interaction Proxies */
  --_bg-op: var(--s-glass-op-base);
  --_stroke-op: var(--s-stroke-op-idle);
  --_text-op: var(--s-text-op-idle);
  position: relative;
  border-radius: var(--btn-radius);
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  /* ПОРЯДОК ВАЖЕН: сначала экстенд, потом переопределение */
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--btn-h);
  /* ЦЕНТРИРОВАНИЕ И АНТИ-ДЕРГАНИЕ */
  padding-block: 0;
  backface-visibility: hidden;
  cursor: pointer;
  z-index: 10;
  color: rgba(var(--p-white-rgb), var(--_text-op));
  /* ВНУТРЕННИЙ ТЕКСТ */
  /* Motion DNA */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), color var(--d-fast) var(--e-out), transform var(--d-fast) var(--e-out), -webkit-backdrop-filter var(--d-fast) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), color var(--d-fast) var(--e-out), backdrop-filter var(--d-fast) var(--e-out), transform var(--d-fast) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), color var(--d-fast) var(--e-out), backdrop-filter var(--d-fast) var(--e-out), transform var(--d-fast) var(--e-out), -webkit-backdrop-filter var(--d-fast) var(--e-out);
  transition-delay: var(--stagger-step);
  /* [ЛОГИКА ХОВЕРА] */
  /* ============================================================
     3. ТЕГИ И ПЕРЕКЛЮЧАТЕЛИ ЛАБЫ
     ============================================================ */
  /* 2. НАВБАР */
  /* 3. КНОПКА ЗАКРЫТИЯ */
  /* Вне контекста */
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .ui-button, .ui-button.is-full-width, .ui-tabs-group .ui-button {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.ui-button::before, .ui-button.is-full-width::before, .ui-tabs-group .ui-button::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
.ui-button span, .ui-button.is-full-width span, .ui-tabs-group .ui-button span {
  display: block;
  line-height: 1;
  pointer-events: none;
}
.b-static-card:hover .ui-button, .b-card:hover .ui-button {
  transition-delay: 0s;
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-hover);
  --_text-op: var(--s-text-op-hover);
}
.ui-button.ui-button:hover {
  transition-delay: 0s;
  --_bg-op: var(--s-glass-op-active);
  --_stroke-op: var(--s-stroke-op-active);
  --_text-op: 1;
}
.ui-button:active {
  transform: scale(var(--scale-press));
  transition-duration: 0.1s;
}
#tagsContainer .ui-button, .lab-mobile-switch .ui-button {
  --btn-h: var(--ui-h-btn-master);
  padding-inline: calc(var(--unit) * 6);
  transition-delay: 0s;
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-hover);
}
#tagsContainer .ui-button:hover, #tagsContainer .ui-button.is-active, .lab-mobile-switch .ui-button:hover, .lab-mobile-switch .ui-button.is-active {
  --_bg-op: var(--s-glass-op-active);
  --_stroke-op: var(--s-stroke-op-active);
  --_text-op: 1;
  -webkit-backdrop-filter: blur(var(--s-glass-blur-strong));
          backdrop-filter: blur(var(--s-glass-blur-strong));
}
.ui-button.ui-toggle-tag {
  --btn-h: var(--ui-h-btn-master);
  padding-inline: calc(var(--unit) * 6);
  transition-delay: 0s;
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-hover);
  width: 100%;
}
.ui-button.ui-toggle-tag:hover, .ui-button.ui-toggle-tag.is-active {
  --_bg-op: var(--s-glass-op-active);
  --_stroke-op: var(--s-stroke-op-active);
  --_text-op: 1;
  -webkit-backdrop-filter: blur(var(--s-glass-blur-strong));
          backdrop-filter: blur(var(--s-glass-blur-strong));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--s-stroke-op-active));
}
.b-navbar .ui-button {
  --btn-h: var(--nav-content-h);
  --btn-radius: var(--nav-inner-radius);
  padding-inline: var(--space-xs);
}
.b-navbar .ui-button--logo, .b-navbar .ui-button--close {
  width: var(--btn-h);
  padding: 0;
  aspect-ratio: 1/1;
}
.ui-button--close:not(.b-navbar .ui-button) {
  width: var(--btn-h);
  padding: 0;
}
.ui-button:not(.b-static-card .ui-button):not(.b-card .ui-button):not(.b-navbar .ui-button):not(#tagsContainer .ui-button):not(.lab-mobile-switch .ui-button) {
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-hover);
}

/* ============================================================
   5-COMPONENTS / _ACCORDION.SCSS
   Batura Library | System Synced v16.1 [Geometric Sync]
   ============================================================ */
@keyframes cardItemEntrance {
  0% {
    opacity: var(--opacity-hidden);
    transform: translate3d(var(--entrance-offset), 0, var(--opt-z-fix));
  }
  100% {
    opacity: var(--opacity-visible);
    transform: translate3d(0, 0, var(--opt-z-fix));
  }
}
.b-accordion {
  display: flex;
  width: 100%;
  gap: var(--space-sm);
  height: clamp(var(--accordion-height-min), 70vh, var(--accordion-height-max));
  flex-direction: row;
  /* ============================================================
       MOBILE ADAPTIVE (Vertical Stack)
       ============================================================ */
}
.b-accordion .b-static-card {
  position: relative;
  overflow: hidden;
  cursor: pointer;
  flex: var(--card-grow-base) 0 10%;
  min-width: var(--accordion-tab-min);
  --s-card-radius: var(--radius-master);
  position: relative;
  border-radius: var(--s-card-radius);
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: flex var(--d-slow) var(--e-out), background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out);
  /* Логика декора и индекса при наведении на карту */
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .b-accordion .b-static-card {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.b-accordion .b-static-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
.b-accordion .b-static-card__index {
  position: absolute;
  top: var(--p-card);
  left: var(--p-card);
  z-index: 10;
  color: rgba(var(--p-white-rgb), var(--s-text-op-idle));
  transition: color var(--d-fast) var(--e-out);
}
.b-accordion .b-static-card__deco {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-180deg);
  writing-mode: vertical-rl;
  white-space: nowrap;
  pointer-events: none;
  z-index: 5;
  color: rgba(var(--p-white-rgb), var(--s-text-op-idle));
  transition: opacity var(--d-fast) var(--e-out), visibility var(--d-fast) var(--e-out);
}
.b-accordion .b-static-card:hover .b-static-card__index, .b-accordion .b-static-card.is-active .b-static-card__index {
  color: rgba(var(--p-white-rgb), var(--s-text-op-hover));
}
.b-accordion .b-static-card:hover .b-static-card__deco, .b-accordion .b-static-card.is-active .b-static-card__deco {
  opacity: var(--opacity-hidden);
  visibility: hidden;
  transition-property: none;
  transition-duration: 0s;
}
.b-accordion .b-static-card__viewport {
  height: 100%;
  padding: var(--p-card);
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  opacity: var(--opacity-hidden);
  visibility: hidden;
  z-index: 7;
  flex: none;
}
.b-accordion .b-static-card.is-active {
  flex: var(--card-grow-active) 0 10%;
  cursor: default;
  --_stroke-op: var(--s-stroke-op-hover);
}
.b-accordion .b-static-card.is-active .b-static-card__viewport {
  opacity: var(--opacity-visible);
  visibility: visible;
}
.b-accordion .b-static-card.is-active .b-static-card__viewport > * {
  animation: cardItemEntrance var(--d-base) var(--e-out) both;
}
.b-accordion .b-static-card.is-active .b-static-card__viewport > *:nth-child(1) {
  animation-delay: calc(var(--entrance-delay) + 0.1s);
}
.b-accordion .b-static-card.is-active .b-static-card__viewport > *:nth-child(2) {
  animation-delay: calc(var(--entrance-delay) + 0.2s);
}
.b-accordion .b-static-card.is-active .b-static-card__body {
  flex: none;
  margin-bottom: 0;
}
.b-accordion .b-static-card.is-active .b-static-card__body h3, .b-accordion .b-static-card.is-active .b-static-card__body p {
  margin: 0;
}
.b-accordion .b-static-card.is-active .b-static-card__body .text-data, .b-accordion .b-static-card.is-active .b-static-card__body .b-code-box__content, .b-accordion .b-static-card.is-active .b-static-card__body .ui-info-tag, .b-accordion .b-static-card.is-active .b-static-card__body .ui-range__header, .b-accordion .b-static-card.is-active .b-static-card__body .b-catalog-header .index, .b-catalog-header .b-accordion .b-static-card.is-active .b-static-card__body .index, .b-accordion .b-static-card.is-active .b-static-card__body .b-alphabet-nav__char, .b-accordion .b-static-card.is-active .b-static-card__body .b-static-card__index, .b-accordion .b-static-card.is-active .b-static-card__body small, .b-accordion .b-static-card.is-active .b-static-card__body .b-navbar__search input, .b-navbar__search .b-accordion .b-static-card.is-active .b-static-card__body input, .b-accordion .b-static-card.is-active .b-static-card__body .ui-button, .b-accordion .b-static-card.is-active .b-static-card__body .b-static-card__deco {
  display: block;
  margin-bottom: var(--space-xs);
  opacity: var(--s-text-op-hover);
}
.b-accordion .b-static-card.is-active .b-static-card__body .text-heading, .b-accordion .b-static-card.is-active .b-static-card__body h2 {
  margin-left: var(--text-offset-heading);
}
.b-accordion .b-static-card.is-active .b-static-card__body .text-heading + .text-body, .b-accordion .b-static-card.is-active .b-static-card__body .ui-instruction .text-heading + .text-info-hint, .ui-instruction .b-accordion .b-static-card.is-active .b-static-card__body .text-heading + .text-info-hint, .b-accordion .b-static-card.is-active .b-static-card__body h2 + .text-body, .b-accordion .b-static-card.is-active .b-static-card__body .ui-instruction h2 + .text-info-hint, .ui-instruction .b-accordion .b-static-card.is-active .b-static-card__body h2 + .text-info-hint, .b-accordion .b-static-card.is-active .b-static-card__body .text-heading + p, .b-accordion .b-static-card.is-active .b-static-card__body h2 + p {
  margin-top: var(--space-xs);
}
.b-accordion .b-static-card.is-active .b-static-card__actions {
  margin-top: var(--space-sm);
  display: flex;
}
.b-accordion .b-static-card.is-active:hover {
  flex: var(--card-grow-active-hover) 0 10%;
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-active);
}
.b-accordion .b-static-card:not(.is-active):hover {
  flex: calc(var(--card-grow-base) * 1.4) 0 10%;
  --_bg-op: var(--s-glass-op-hover);
}
@media (max-width: 768px) {
  .b-accordion {
    flex-direction: column;
    height: clamp(var(--accordion-height-min-mobile), 80vh, var(--accordion-height-max-mobile));
  }
  .b-accordion .b-static-card {
    min-width: 100%;
    min-height: var(--accordion-tab-min-mobile);
    flex: var(--card-grow-base) 0 var(--accordion-tab-min-mobile);
    border-radius: var(--accordion-tab-radius);
    /* Убираем расширение при случайном скролле по закрытым папкам */
  }
  .b-accordion .b-static-card:not(.is-active):hover {
    flex: var(--card-grow-base) 0 var(--accordion-tab-min-mobile);
  }
  .b-accordion .b-static-card__index {
    top: 50%;
    transform: translateY(-50%);
  }
  .b-accordion .b-static-card__deco {
    writing-mode: horizontal-tb;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: var(--opacity-visible);
  }
  .b-accordion .b-static-card.is-active {
    /* 1. ФИКС: Убираем вторую степень растяжения (фиксируем на 7.5) */
    flex: var(--accordion-flex-mobile-active) 0 10%;
    border-radius: var(--s-card-radius);
    /* 2. ФИКС: Состояние ACTIVE (Максимальная яркость) сразу при открытии */
    --_stroke-op: var(--s-stroke-op-active);
    --_text-op: 1;
    /* Убираем прыжок размера при повторном тапе */
  }
  .b-accordion .b-static-card.is-active .b-static-card__index {
    top: var(--p-card);
    transform: translateY(0);
  }
  .b-accordion .b-static-card.is-active .b-static-card__viewport > * {
    /* 3. ФИКС: Анимация появления СНИЗУ ВВЕРХ */
    animation-name: cardItemEntranceMobile;
  }
  .b-accordion .b-static-card.is-active .ui-button {
    --_bg-op: var(--s-glass-op-active);
    --_stroke-op: var(--s-stroke-op-active);
    --_text-op: 1;
    transition-delay: 0s;
  }
  .b-accordion .b-static-card.is-active .ui-button:active {
    transform: scale(var(--scale-press-strong));
  }
  .b-accordion .b-static-card.is-active:hover {
    flex: var(--accordion-flex-mobile-active) 0 10%;
  }
}

/* ============================================================
   5-COMPONENTS / _FOOTER.SCSS
   Batura Library | System Synced v7.7 [Geometric Symmetry]
   ============================================================ */
.b-footer {
  /* 1. ПАРАМЕТРЫ ЛИНИЙ (Синхронизация) */
  --footer-stroke-color: rgba(var(--p-white-rgb), calc(var(--s-stroke-op-idle) * 0.5));
  --_exit-delay: var(--stagger-step);
  padding-bottom: var(--p-page-bottom);
  position: relative;
  z-index: var(--z-app);
}
.b-footer__grid {
  border-top: var(--s-stroke-width) solid var(--footer-stroke-color);
  padding-top: var(--space-xl);
  display: grid;
  grid-template-columns: 1.5fr 1fr 1fr;
  gap: var(--space-xl);
  /* ФИКС: Якорь для выравнивания заголовков всех колонок в одну линию */
  align-items: start;
}
@media (max-width: 850px) {
  .b-footer__grid {
    grid-template-columns: 1fr;
    gap: var(--space-lg);
  }
}
.b-footer__brand {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
.b-footer__brand > * + * {
  margin-top: var(--space-md);
}
.b-footer__brand > .text-data + .text-hero, .b-footer__brand > .b-code-box__content + .text-hero, .b-footer__brand > .ui-info-tag + .text-hero, .b-footer__brand > .ui-range__header + .text-hero, .b-catalog-header .b-footer__brand > .index + .text-hero, .b-footer__brand > .b-alphabet-nav__char + .text-hero, .b-footer__brand > .b-static-card__index + .text-hero, .b-footer__brand > small + .text-hero, .b-navbar__search .b-footer__brand > input + .text-hero, .b-footer__brand > .ui-button + .text-hero, .b-accordion .b-footer__brand > .b-static-card__deco + .text-hero, .b-footer__brand > .text-data + h1, .b-footer__brand > .b-code-box__content + h1, .b-footer__brand > .ui-info-tag + h1, .b-footer__brand > .ui-range__header + h1, .b-catalog-header .b-footer__brand > .index + h1, .b-footer__brand > .b-alphabet-nav__char + h1, .b-footer__brand > .b-static-card__index + h1, .b-footer__brand > small + h1, .b-navbar__search .b-footer__brand > input + h1, .b-footer__brand > .ui-button + h1, .b-accordion .b-footer__brand > .b-static-card__deco + h1, .b-footer__brand > .text-data + .text-heading, .b-footer__brand > .b-code-box__content + .text-heading, .b-footer__brand > .ui-info-tag + .text-heading, .b-footer__brand > .ui-range__header + .text-heading, .b-catalog-header .b-footer__brand > .index + .text-heading, .b-footer__brand > .b-alphabet-nav__char + .text-heading, .b-footer__brand > .b-static-card__index + .text-heading, .b-footer__brand > small + .text-heading, .b-navbar__search .b-footer__brand > input + .text-heading, .b-footer__brand > .ui-button + .text-heading, .b-accordion .b-footer__brand > .b-static-card__deco + .text-heading, .b-footer__brand > .text-data + h2, .b-footer__brand > .b-code-box__content + h2, .b-footer__brand > .ui-info-tag + h2, .b-footer__brand > .ui-range__header + h2, .b-catalog-header .b-footer__brand > .index + h2, .b-footer__brand > .b-alphabet-nav__char + h2, .b-footer__brand > .b-static-card__index + h2, .b-footer__brand > small + h2, .b-navbar__search .b-footer__brand > input + h2, .b-footer__brand > .ui-button + h2, .b-accordion .b-footer__brand > .b-static-card__deco + h2, .b-footer__brand > .text-hero + .text-body, .ui-instruction .b-footer__brand > .text-hero + .text-info-hint, .b-footer__brand > h1 + .text-body, .ui-instruction .b-footer__brand > h1 + .text-info-hint, .b-footer__brand > .text-hero + p, .b-footer__brand > h1 + p, .b-footer__brand > .text-heading + .text-body, .ui-instruction .b-footer__brand > .text-heading + .text-info-hint, .b-footer__brand > h2 + .text-body, .ui-instruction .b-footer__brand > h2 + .text-info-hint, .b-footer__brand > .text-heading + p, .b-footer__brand > h2 + p {
  margin-top: var(--space-xs);
}
.b-footer__brand > .text-body + .l-flex-group, .ui-instruction .b-footer__brand > .text-info-hint + .l-flex-group, .b-footer__brand > p + .l-flex-group {
  margin-top: var(--space-lg);
}
.b-footer__logo {
  height: calc(var(--unit) * 7);
  --_logo-op: calc(var(--s-text-op-idle) * 0.5);
  color: rgba(var(--p-white-rgb), var(--_logo-op));
  transition: color var(--d-fast) var(--e-out) var(--_exit-delay);
  margin-left: calc(var(--unit) * -0.5);
}
.b-footer__logo .b-logo {
  height: 100%;
}
.b-footer__logo .b-logo svg {
  height: 100%;
  transform: translate3d(var(--logo-balance-x), 0, 0);
}
.b-footer__brand:hover .b-footer__logo {
  --_exit-delay: 0s;
  --_logo-op: var(--s-text-op-hover);
}
.b-footer__group {
  /* Синхронизируем вертикальный зазор заголовков с левой колонкой */
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
.b-footer__group > * + * {
  margin-top: var(--space-md);
}
.b-footer__group > .text-data + .text-hero, .b-footer__group > .b-code-box__content + .text-hero, .b-footer__group > .ui-info-tag + .text-hero, .b-footer__group > .ui-range__header + .text-hero, .b-catalog-header .b-footer__group > .index + .text-hero, .b-footer__group > .b-alphabet-nav__char + .text-hero, .b-footer__group > .b-static-card__index + .text-hero, .b-footer__group > small + .text-hero, .b-navbar__search .b-footer__group > input + .text-hero, .b-footer__group > .ui-button + .text-hero, .b-accordion .b-footer__group > .b-static-card__deco + .text-hero, .b-footer__group > .text-data + h1, .b-footer__group > .b-code-box__content + h1, .b-footer__group > .ui-info-tag + h1, .b-footer__group > .ui-range__header + h1, .b-catalog-header .b-footer__group > .index + h1, .b-footer__group > .b-alphabet-nav__char + h1, .b-footer__group > .b-static-card__index + h1, .b-footer__group > small + h1, .b-navbar__search .b-footer__group > input + h1, .b-footer__group > .ui-button + h1, .b-accordion .b-footer__group > .b-static-card__deco + h1, .b-footer__group > .text-data + .text-heading, .b-footer__group > .b-code-box__content + .text-heading, .b-footer__group > .ui-info-tag + .text-heading, .b-footer__group > .ui-range__header + .text-heading, .b-catalog-header .b-footer__group > .index + .text-heading, .b-footer__group > .b-alphabet-nav__char + .text-heading, .b-footer__group > .b-static-card__index + .text-heading, .b-footer__group > small + .text-heading, .b-navbar__search .b-footer__group > input + .text-heading, .b-footer__group > .ui-button + .text-heading, .b-accordion .b-footer__group > .b-static-card__deco + .text-heading, .b-footer__group > .text-data + h2, .b-footer__group > .b-code-box__content + h2, .b-footer__group > .ui-info-tag + h2, .b-footer__group > .ui-range__header + h2, .b-catalog-header .b-footer__group > .index + h2, .b-footer__group > .b-alphabet-nav__char + h2, .b-footer__group > .b-static-card__index + h2, .b-footer__group > small + h2, .b-navbar__search .b-footer__group > input + h2, .b-footer__group > .ui-button + h2, .b-accordion .b-footer__group > .b-static-card__deco + h2, .b-footer__group > .text-hero + .text-body, .ui-instruction .b-footer__group > .text-hero + .text-info-hint, .b-footer__group > h1 + .text-body, .ui-instruction .b-footer__group > h1 + .text-info-hint, .b-footer__group > .text-hero + p, .b-footer__group > h1 + p, .b-footer__group > .text-heading + .text-body, .ui-instruction .b-footer__group > .text-heading + .text-info-hint, .b-footer__group > h2 + .text-body, .ui-instruction .b-footer__group > h2 + .text-info-hint, .b-footer__group > .text-heading + p, .b-footer__group > h2 + p {
  margin-top: var(--space-xs);
}
.b-footer__group > .text-body + .l-flex-group, .ui-instruction .b-footer__group > .text-info-hint + .l-flex-group, .b-footer__group > p + .l-flex-group {
  margin-top: var(--space-lg);
}
.b-footer__group .l-flow {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
.b-footer__group .l-flow > * + * {
  margin-top: var(--space-xs);
}
.b-footer__group .l-flow > .text-data + .text-hero, .b-footer__group .l-flow > .b-code-box__content + .text-hero, .b-footer__group .l-flow > .ui-info-tag + .text-hero, .b-footer__group .l-flow > .ui-range__header + .text-hero, .b-footer__group .b-catalog-header .l-flow > .index + .text-hero, .b-catalog-header .b-footer__group .l-flow > .index + .text-hero, .b-footer__group .l-flow > .b-alphabet-nav__char + .text-hero, .b-footer__group .l-flow > .b-static-card__index + .text-hero, .b-footer__group .l-flow > small + .text-hero, .b-footer__group .b-navbar__search .l-flow > input + .text-hero, .b-navbar__search .b-footer__group .l-flow > input + .text-hero, .b-footer__group .l-flow > .ui-button + .text-hero, .b-footer__group .b-accordion .l-flow > .b-static-card__deco + .text-hero, .b-accordion .b-footer__group .l-flow > .b-static-card__deco + .text-hero, .b-footer__group .l-flow > .text-data + h1, .b-footer__group .l-flow > .b-code-box__content + h1, .b-footer__group .l-flow > .ui-info-tag + h1, .b-footer__group .l-flow > .ui-range__header + h1, .b-footer__group .b-catalog-header .l-flow > .index + h1, .b-catalog-header .b-footer__group .l-flow > .index + h1, .b-footer__group .l-flow > .b-alphabet-nav__char + h1, .b-footer__group .l-flow > .b-static-card__index + h1, .b-footer__group .l-flow > small + h1, .b-footer__group .b-navbar__search .l-flow > input + h1, .b-navbar__search .b-footer__group .l-flow > input + h1, .b-footer__group .l-flow > .ui-button + h1, .b-footer__group .b-accordion .l-flow > .b-static-card__deco + h1, .b-accordion .b-footer__group .l-flow > .b-static-card__deco + h1, .b-footer__group .l-flow > .text-data + .text-heading, .b-footer__group .l-flow > .b-code-box__content + .text-heading, .b-footer__group .l-flow > .ui-info-tag + .text-heading, .b-footer__group .l-flow > .ui-range__header + .text-heading, .b-footer__group .b-catalog-header .l-flow > .index + .text-heading, .b-catalog-header .b-footer__group .l-flow > .index + .text-heading, .b-footer__group .l-flow > .b-alphabet-nav__char + .text-heading, .b-footer__group .l-flow > .b-static-card__index + .text-heading, .b-footer__group .l-flow > small + .text-heading, .b-footer__group .b-navbar__search .l-flow > input + .text-heading, .b-navbar__search .b-footer__group .l-flow > input + .text-heading, .b-footer__group .l-flow > .ui-button + .text-heading, .b-footer__group .b-accordion .l-flow > .b-static-card__deco + .text-heading, .b-accordion .b-footer__group .l-flow > .b-static-card__deco + .text-heading, .b-footer__group .l-flow > .text-data + h2, .b-footer__group .l-flow > .b-code-box__content + h2, .b-footer__group .l-flow > .ui-info-tag + h2, .b-footer__group .l-flow > .ui-range__header + h2, .b-footer__group .b-catalog-header .l-flow > .index + h2, .b-catalog-header .b-footer__group .l-flow > .index + h2, .b-footer__group .l-flow > .b-alphabet-nav__char + h2, .b-footer__group .l-flow > .b-static-card__index + h2, .b-footer__group .l-flow > small + h2, .b-footer__group .b-navbar__search .l-flow > input + h2, .b-navbar__search .b-footer__group .l-flow > input + h2, .b-footer__group .l-flow > .ui-button + h2, .b-footer__group .b-accordion .l-flow > .b-static-card__deco + h2, .b-accordion .b-footer__group .l-flow > .b-static-card__deco + h2, .b-footer__group .l-flow > .text-hero + .text-body, .b-footer__group .ui-instruction .l-flow > .text-hero + .text-info-hint, .ui-instruction .b-footer__group .l-flow > .text-hero + .text-info-hint, .b-footer__group .l-flow > h1 + .text-body, .b-footer__group .ui-instruction .l-flow > h1 + .text-info-hint, .ui-instruction .b-footer__group .l-flow > h1 + .text-info-hint, .b-footer__group .l-flow > .text-hero + p, .b-footer__group .l-flow > h1 + p, .b-footer__group .l-flow > .text-heading + .text-body, .b-footer__group .ui-instruction .l-flow > .text-heading + .text-info-hint, .ui-instruction .b-footer__group .l-flow > .text-heading + .text-info-hint, .b-footer__group .l-flow > h2 + .text-body, .b-footer__group .ui-instruction .l-flow > h2 + .text-info-hint, .ui-instruction .b-footer__group .l-flow > h2 + .text-info-hint, .b-footer__group .l-flow > .text-heading + p, .b-footer__group .l-flow > h2 + p {
  margin-top: var(--space-xs);
}
.b-footer__group .l-flow > .text-body + .l-flex-group, .b-footer__group .ui-instruction .l-flow > .text-info-hint + .l-flex-group, .ui-instruction .b-footer__group .l-flow > .text-info-hint + .l-flex-group, .b-footer__group .l-flow > p + .l-flex-group {
  margin-top: var(--space-lg);
}
.b-footer__link {
  font-family: var(--font-main);
  font-size: var(--fs-body);
  font-weight: 300;
  line-height: var(--lh-body);
  --_link-op: var(--s-text-op-idle);
  color: rgba(var(--p-white-rgb), var(--_link-op));
  /* Только цветовая анимация */
  transition: color var(--d-fast) var(--e-out) var(--_exit-delay);
  display: block;
}
.b-footer__link:hover {
  --_exit-delay: 0s;
  --_link-op: var(--s-text-op-hover);
}
.b-footer__bottom {
  margin-top: var(--space-xl);
  padding-top: var(--space-md);
  border-top: var(--s-stroke-width) solid var(--footer-stroke-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.b-footer__bottom .text-data, .b-footer__bottom .b-code-box__content, .b-footer__bottom .ui-info-tag, .b-footer__bottom .ui-range__header, .b-footer__bottom .b-catalog-header .index, .b-catalog-header .b-footer__bottom .index, .b-footer__bottom .b-alphabet-nav__char, .b-footer__bottom .b-static-card__index, .b-footer__bottom small, .b-footer__bottom .b-navbar__search input, .b-navbar__search .b-footer__bottom input, .b-footer__bottom .ui-button, .b-footer__bottom .b-accordion .b-static-card__deco, .b-accordion .b-footer__bottom .b-static-card__deco {
  font-size: var(--fs-data);
  opacity: calc(var(--s-text-op-idle) * 0.6);
  letter-spacing: var(--ls-caption);
}

.ui-button--logo {
  width: var(--btn-h);
  padding: 0;
  aspect-ratio: 1/1;
}
.ui-button--logo .b-logo {
  height: 35%;
  width: 35%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.ui-button--logo .b-logo svg {
  width: 100%;
  height: 100%;
  display: block;
  color: inherit;
  fill: currentColor;
  transform: translate3d(var(--logo-balance-x), 0, 0);
}
.b-navbar .ui-button--logo {
  --btn-h: var(--nav-content-h);
  --btn-radius: var(--nav-inner-radius);
  --_blur: var(--nav-blur);
}

/* ============================================================
   5-COMPONENTS / _STATIC-CARD.SCSS
   Batura Library | Bottom Anchor v32.1 [Gravity Sync]
   ============================================================ */
.b-static-card {
  /* 1. ГЕОМЕТРИЯ И МАТЕРИАЛ */
  --s-card-radius: var(--radius-master);
  --_preview-radius: calc(var(--s-card-radius) - (var(--p-card) * 0.5));
  position: relative;
  border-radius: var(--s-card-radius);
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  width: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  /* ИЗМЕНЕНИЕ: height: 100% позволяет карточке растягиваться 
     под высоту самой длинной карточки в ряду. */
  height: 100%;
  /* 2. СОСТОЯНИЯ (БЕЗ ИЗМЕНЕНИЙ) */
  --_bg-op: var(--s-glass-op-base);
  --_stroke-op: var(--s-stroke-op-idle);
  --_text-op: var(--s-text-op-idle);
  /* 3. ВЬЮПОРТ (Внутренняя гравитация) */
  /* 4. ТЕКСТОВЫЙ БЛОК (БЕЗ ИЗМЕНЕНИЙ) */
  /* 5. КНОПКА (Гравитация вкл.) */
  /* 6. ПРЕВЬЮ И АДАПТИВ (БЕЗ ИЗМЕНЕНИЙ) */
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .b-static-card {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.b-static-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
.b-static-card.is-focused, .b-static-card:hover {
  transition-delay: 0s;
}
.b-static-card.is-focused {
  --_stroke-op: var(--s-stroke-op-hover);
  --_text-op: var(--_text-op-hover, var(--s-text-op-hover));
  --_bg-op: var(--s-glass-op-hover);
}
.b-static-card:hover {
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-active);
  --_glare-op: var(--s-glare-op-hover);
  --_text-op: 1;
}
.b-static-card__viewport {
  padding: var(--p-card);
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  display: flex;
  flex-direction: column;
  flex: 1;
  border-radius: inherit;
  position: relative;
  /* ИЗМЕНЕНИЕ: Убираем overflow, если это возможно. 
     Если внутри есть картинки, которые надо резать — 
     лучше дать border-radius самим картинкам. */
  overflow: visible;
}
.b-static-card__viewport > * + * {
  margin-top: var(--space-md);
}
.b-static-card__viewport > .text-data + .text-hero, .b-static-card__viewport > .b-code-box__content + .text-hero, .b-static-card__viewport > .ui-info-tag + .text-hero, .b-static-card__viewport > .ui-range__header + .text-hero, .b-catalog-header .b-static-card__viewport > .index + .text-hero, .b-static-card__viewport > .b-alphabet-nav__char + .text-hero, .b-static-card__viewport > .b-static-card__index + .text-hero, .b-static-card__viewport > small + .text-hero, .b-navbar__search .b-static-card__viewport > input + .text-hero, .b-static-card__viewport > .ui-button + .text-hero, .b-accordion .b-static-card__viewport > .b-static-card__deco + .text-hero, .b-static-card__viewport > .text-data + h1, .b-static-card__viewport > .b-code-box__content + h1, .b-static-card__viewport > .ui-info-tag + h1, .b-static-card__viewport > .ui-range__header + h1, .b-catalog-header .b-static-card__viewport > .index + h1, .b-static-card__viewport > .b-alphabet-nav__char + h1, .b-static-card__viewport > .b-static-card__index + h1, .b-static-card__viewport > small + h1, .b-navbar__search .b-static-card__viewport > input + h1, .b-static-card__viewport > .ui-button + h1, .b-accordion .b-static-card__viewport > .b-static-card__deco + h1, .b-static-card__viewport > .text-data + .text-heading, .b-static-card__viewport > .b-code-box__content + .text-heading, .b-static-card__viewport > .ui-info-tag + .text-heading, .b-static-card__viewport > .ui-range__header + .text-heading, .b-catalog-header .b-static-card__viewport > .index + .text-heading, .b-static-card__viewport > .b-alphabet-nav__char + .text-heading, .b-static-card__viewport > .b-static-card__index + .text-heading, .b-static-card__viewport > small + .text-heading, .b-navbar__search .b-static-card__viewport > input + .text-heading, .b-static-card__viewport > .ui-button + .text-heading, .b-accordion .b-static-card__viewport > .b-static-card__deco + .text-heading, .b-static-card__viewport > .text-data + h2, .b-static-card__viewport > .b-code-box__content + h2, .b-static-card__viewport > .ui-info-tag + h2, .b-static-card__viewport > .ui-range__header + h2, .b-catalog-header .b-static-card__viewport > .index + h2, .b-static-card__viewport > .b-alphabet-nav__char + h2, .b-static-card__viewport > .b-static-card__index + h2, .b-static-card__viewport > small + h2, .b-navbar__search .b-static-card__viewport > input + h2, .b-static-card__viewport > .ui-button + h2, .b-accordion .b-static-card__viewport > .b-static-card__deco + h2, .b-static-card__viewport > .text-hero + .text-body, .ui-instruction .b-static-card__viewport > .text-hero + .text-info-hint, .b-static-card__viewport > h1 + .text-body, .ui-instruction .b-static-card__viewport > h1 + .text-info-hint, .b-static-card__viewport > .text-hero + p, .b-static-card__viewport > h1 + p, .b-static-card__viewport > .text-heading + .text-body, .ui-instruction .b-static-card__viewport > .text-heading + .text-info-hint, .b-static-card__viewport > h2 + .text-body, .ui-instruction .b-static-card__viewport > h2 + .text-info-hint, .b-static-card__viewport > .text-heading + p, .b-static-card__viewport > h2 + p {
  margin-top: var(--space-xs);
}
.b-static-card__viewport > .text-body + .l-flex-group, .ui-instruction .b-static-card__viewport > .text-info-hint + .l-flex-group, .b-static-card__viewport > p + .l-flex-group {
  margin-top: var(--space-lg);
}
.b-static-card__top {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  width: 100%;
}
.b-static-card__index {
  font-weight: 400;
}
.b-static-card__body {
  flex: none;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
.b-static-card__body > .text-heading + .text-body, .ui-instruction .b-static-card__body > .text-heading + .text-info-hint, .b-static-card__body > h2 + .text-body, .ui-instruction .b-static-card__body > h2 + .text-info-hint, .b-static-card__body > .text-heading + p, .b-static-card__body > h2 + p {
  margin-top: var(--space-xs);
}
.b-static-card__body > .text-body + .b-static-card__tags, .ui-instruction .b-static-card__body > .text-info-hint + .b-static-card__tags, .b-static-card__body > p + .b-static-card__tags {
  margin-top: var(--space-xs);
}
.b-static-card__actions {
  display: flex;
  justify-content: flex-start;
  width: 100%;
  /* ИЗМЕНЕНИЕ: margin-top: auto выталкивает блок вниз.
     var(--space-sm) остается как минимальный отступ, если текста много. */
  margin-top: auto;
  padding-top: var(--space-sm);
}
.b-static-card__tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
}
.b-static-card .b-preview-box, .b-static-card .b-code-box {
  --local-preview-radius: var(--_preview-radius);
  width: 100%;
  aspect-ratio: 16/9;
  position: relative;
  border-radius: var(--local-preview-radius);
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  overflow: hidden;
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .b-static-card .b-preview-box, .b-static-card .b-code-box {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.b-static-card .b-preview-box::before, .b-static-card .b-code-box::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
@media (max-width: 768px) {
  .b-static-card.is-focused {
    --_bg-op: var(--s-glass-op-hover);
    --_stroke-op: var(--s-stroke-op-active);
    --_text-op: 1;
  }
  .b-static-card.is-focused .ui-button {
    --_bg-op: var(--s-glass-op-active);
    --_stroke-op: var(--s-stroke-op-active);
    --_text-op: 1;
    transition-delay: 0s;
  }
}

/* ============================================================
   5-COMPONENTS / _ALPHABET-NAV.SCSS
   Batura Library | System v16.0 [Alphabetical Rail]
   ============================================================ */
.b-alphabet-nav {
  position: sticky;
  top: var(--alphabet-nav-top);
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  min-width: var(--alphabet-nav-min-w);
  z-index: 10;
}
.b-alphabet-nav__item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  cursor: pointer;
  opacity: var(--opacity-faint);
  transition: opacity var(--d-fast) var(--e-out);
}
.b-alphabet-nav__item:hover {
  opacity: var(--opacity-visible);
}
.b-alphabet-nav__item:hover .b-alphabet-nav__line {
  width: var(--alphabet-nav-line-w);
}
.b-alphabet-nav__char {
  font-size: var(--fs-caption);
}
.b-alphabet-nav__line {
  height: var(--alphabet-nav-line-h);
  width: var(--alphabet-nav-line-w-short);
  background: var(--color-text-main);
  transition: width var(--d-fast) var(--e-out);
}

/* ============================================================
   3-OBJECTS / _CATALOG.SCSS
   Batura Library | Variable Height Sync [v31.2]
   ============================================================ */
.b-catalog-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
  --_stroke-op: var(--s-stroke-op-idle);
  --_text-op: var(--s-text-op-idle);
  --_exit-delay: var(--stagger-step);
}
.b-catalog-section.is-focused {
  --_exit-delay: 0s;
  --_stroke-op: var(--s-stroke-op-hover);
  --_text-op: var(--s-text-op-hover);
}
.b-catalog-section:hover {
  --_exit-delay: 0s;
  --_stroke-op: var(--s-stroke-op-active);
  --_text-op: var(--s-text-op-hover);
}
@media (max-width: 768px) {
  .b-catalog-section.is-focused {
    --_stroke-op: var(--s-stroke-op-active);
    --_text-op: 1;
  }
}

.b-catalog-header {
  display: flex;
  align-items: baseline;
  gap: var(--space-sm);
  padding-bottom: var(--space-xs);
  border-bottom: none;
  box-shadow: 0 var(--s-stroke-width) 0 0 rgba(var(--p-white-rgb), var(--_stroke-op));
  transform: translateZ(0);
  backface-visibility: hidden;
  transition: box-shadow var(--d-fast) var(--e-out) var(--_exit-delay);
}
.b-catalog-header .letter {
  font-family: var(--font-main);
  font-size: var(--fs-h2);
  font-weight: 200;
  line-height: 1;
  color: rgba(var(--p-white-rgb), var(--_text-op));
  transition: color var(--d-fast) var(--e-out) var(--_exit-delay);
  margin-left: var(--text-offset-heading);
}
.b-catalog-header .index {
  color: rgba(var(--p-white-rgb), calc(var(--_text-op) * 0.7));
  transition: color var(--d-fast) var(--e-out) var(--_exit-delay);
}

/* ============================================================
   4-COMPONENTS / _B-PREVIEW-BOX.SCSS
   Batura Library | Preview Engine [Lab Sync Update]
   ============================================================ */
.b-preview-box, .b-code-box {
  width: 100%;
  aspect-ratio: 16/9;
  position: relative;
  container-type: inline-size;
  border-radius: var(--local-preview-radius, var(--radius-inner));
  position: relative;
  border-radius: inherit;
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  --_bg-op: var(--s-glare-op-hover);
  overflow: hidden;
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-base) var(--e-out);
  --lab-preview-viewport-scale: 1;
  --lab-preview-layer-size: clamp(64px, 20cqw, 128px);
  --lab-preview-step: var(--lab-preview-layer-size);
  --lab-preview-motion: clamp(18px, 7cqw, 44px);
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .b-preview-box, .b-code-box {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.b-preview-box::before, .b-code-box::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
.b-preview-box::before, .b-code-box::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 0%, rgba(var(--theme-accent-rgb), var(--s-glare-op-hover)), transparent 75%);
  pointer-events: none;
  z-index: 1;
}
.b-preview-box::after, .b-code-box::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: radial-gradient(rgba(var(--p-white-rgb), var(--m-dot-op)) var(--m-dot-size), transparent var(--m-dot-size));
  background-size: var(--space-sm) var(--space-sm);
  opacity: var(--m-dot-layer-op);
  mix-blend-mode: overlay;
  pointer-events: none;
  z-index: 2;
}

.b-preview-box .lab-preview-stack, .b-code-box .lab-preview-stack {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 2;
  pointer-events: none;
  transform: translate3d(0, 0, 0) scale(var(--lab-preview-viewport-scale, 1));
  transform-origin: center;
}

.b-preview-box .lab-preview-layer, .b-code-box .lab-preview-layer {
  width: var(--lab-preview-layer-size);
  height: var(--lab-preview-layer-size);
  border-radius: var(--lab-preview-layer-radius);
  position: relative;
  border-radius: var(--lab-preview-layer-radius);
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  position: absolute;
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-active);
  --_glare-op: 0;
  --_blur: var(--s-glass-blur-none);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  box-shadow: inset 0 0 0 var(--preview-stroke-width, var(--s-stroke-width)) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  opacity: calc(1 - var(--layer-index) * 0.12);
  transform: translate3d(0, 0, 0);
  transform-origin: center;
  backface-visibility: hidden;
  transition: opacity var(--d-fast) var(--e-out);
  will-change: transform;
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .b-preview-box .lab-preview-layer, .b-code-box .lab-preview-layer {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.b-preview-box .lab-preview-layer::before, .b-code-box .lab-preview-layer::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}

.b-preview-box .lab-preview-layer::before, .b-code-box .lab-preview-layer::before {
  opacity: 0;
}

.b-preview-box .lab-preview-text, .b-code-box .lab-preview-text {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-family: var(--font-mono);
  font-size: clamp(12px, 3cqw, 20px);
  letter-spacing: var(--ls-data);
  color: rgba(var(--p-white-rgb), 0.9);
  text-align: center;
  z-index: 2;
  pointer-events: none;
  text-transform: none;
}

/* ============================================================
   5-COMPONENTS / _LAB-INTERFACE.SCSS
   Batura Library | Monolithic Scroll-Split v10.16 [Clean Fade]
   ============================================================ */
.l-lab-interface {
  /* 1. ОСНОВНЫЕ СТИЛИ */
  position: relative;
  border-radius: 0 0 var(--radius-master) var(--radius-master);
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  --_dynamic-blur: var(--s-glass-blur-none);
  --_blur: var(--_dynamic-blur);
  backdrop-filter: blur(var(--_blur));
  -webkit-backdrop-filter: blur(var(--_blur));
  opacity: var(--opacity-visible);
  visibility: hidden;
  pointer-events: none;
  transform: translate3d(-50%, -100%, 0);
  will-change: transform, backdrop-filter;
  /* 2. ЕДИНАЯ ОБВОДКА (3 стороны, без верхней) */
  /* 3. ПЕРЕМЕННЫЕ */
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-hover);
  --_glare-op: 0;
  --_nav-bottom: calc(var(--nav-h) + var(--nav-top));
  --_content-top: var(--_nav-bottom);
  /* 4. КОЛОНКИ */
  /* 5. РАЗДЕЛИТЕЛЬ */
  /* 6. ТЕКСТОВЫЕ ЭЛЕМЕНТЫ */
  /* 7. ПРЕВЬЮ */
  /* 8. ХОВЕР ЭФФЕКТЫ */
  /* 9. АНИМАЦИИ */
  transition: transform var(--d-morph) var(--e-out), visibility var(--d-morph) var(--e-out), background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), -webkit-backdrop-filter var(--d-fast) var(--e-out);
  transition: transform var(--d-morph) var(--e-out), visibility var(--d-morph) var(--e-out), background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-fast) var(--e-out);
  transition: transform var(--d-morph) var(--e-out), visibility var(--d-morph) var(--e-out), background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-fast) var(--e-out), -webkit-backdrop-filter var(--d-fast) var(--e-out);
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .l-lab-interface {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.l-lab-interface::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
.l-lab-interface, .l-lab-interface .lab-preview-display {
  --_border-shadow:
    inset var(--s-stroke-width) 0 0 0 rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle))),
    inset calc(var(--s-stroke-width) * -1) 0 0 0 rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle))),
    inset 0 calc(var(--s-stroke-width) * -1) 0 0 rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  border-top: none;
  box-shadow: var(--_border-shadow);
}
.l-lab-interface__column {
  height: 100%;
  min-height: 0;
  display: flex;
  flex-direction: column;
  position: relative;
  transform: translateY(100%);
  transition: transform var(--d-morph) var(--e-out);
}
.l-lab-interface__column--setup, .l-lab-interface__column--engine {
  padding: 0;
}
.l-lab-interface__column--setup .b-lab-column-header, .l-lab-interface__column--engine .b-lab-column-header {
  flex: 0 0 auto;
  padding: var(--_content-top) var(--space-md) 0;
  z-index: 10;
  position: relative;
}
.l-lab-interface__column--setup .b-lab-column-body, .l-lab-interface__column--engine .b-lab-column-body {
  flex: 1 1 auto;
  overflow: hidden;
  position: relative;
  z-index: 1;
  padding: 0 var(--space-md) var(--space-xl);
  scrollbar-width: none;
  -ms-overflow-style: none;
  /* МАСКА ДЛЯ КОНТЕНТА (без верхнего блюра) */
  --_fade-bottom: 90%;
  mask-image: linear-gradient(to bottom, black 0%, black var(--_fade-bottom), transparent 100%);
  -webkit-mask-image: linear-gradient(to bottom, black 0%, black var(--_fade-bottom), transparent 100%);
}
.l-lab-interface__column--setup .b-lab-column-body::-webkit-scrollbar, .l-lab-interface__column--engine .b-lab-column-body::-webkit-scrollbar {
  width: 0;
  height: 0;
  display: none;
}
.l-lab-interface__column--setup .b-lab-column-body .l-flow, .l-lab-interface__column--engine .b-lab-column-body .l-flow {
  padding-top: var(--space-md);
}
.l-lab-interface .b-lab-divider {
  width: 100%;
  height: var(--space-xs);
  margin-top: calc(var(--space-xs) * -1);
  position: relative;
  background: transparent;
  border: none;
  box-shadow: inset 0 calc(var(--s-stroke-width) * -1) 0 0 rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  transition: box-shadow var(--d-fast) var(--e-out);
  pointer-events: none;
  transform: translateZ(0);
  will-change: box-shadow;
}
.l-lab-interface .text-heading, .l-lab-interface h2 {
  position: relative;
  width: 100%;
  margin: 0;
  padding-bottom: var(--space-xs);
}
.l-lab-interface .text-subheading, .l-lab-interface .ui-instruction__title {
  position: relative;
  display: block;
  padding-bottom: 0;
}
.l-lab-interface .lab-preview-display {
  width: 100%;
  height: calc(100% - var(--_content-top));
  margin-top: var(--_content-top);
  position: relative;
  border-radius: var(--radius-inner) var(--radius-inner) 0 0;
  overflow: hidden;
  position: relative;
  border-radius: inherit;
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  --_bg-op: var(--s-glare-op-hover);
  --_glare-op: 0;
  border-top: none;
  /* Убираем верхнюю и нижнюю обводку (дубли с навбаром и рамкой лабы) */
  box-shadow: inset var(--s-stroke-width) 0 0 0 rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle))), inset calc(var(--s-stroke-width) * -1) 0 0 0 rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), -webkit-backdrop-filter var(--d-fast) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-fast) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-fast) var(--e-out), -webkit-backdrop-filter var(--d-fast) var(--e-out);
  /* Градиенты превью */
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .l-lab-interface .lab-preview-display {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.l-lab-interface .lab-preview-display::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
.l-lab-interface .lab-preview-display::before, .l-lab-interface .lab-preview-display::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0;
}
.l-lab-interface .lab-preview-display::before {
  background: radial-gradient(circle at 50% 0%, rgba(var(--theme-accent-rgb), 0.15), transparent 80%);
  z-index: 1;
}
.l-lab-interface #previewCanvasContainer {
  position: absolute;
  inset: 0;
  z-index: 3;
  pointer-events: none;
}
.l-lab-interface .lab-preview-stack {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 1;
  padding-bottom: var(--space-xl);
  transform: translate3d(0, 0, 0) scale(var(--lab-preview-viewport-scale, 1));
  transform-origin: center;
}
.l-lab-interface .lab-preview-layer {
  width: var(--lab-preview-layer-size);
  height: var(--lab-preview-layer-size);
  border-radius: var(--lab-preview-layer-radius);
  position: relative;
  border-radius: var(--lab-preview-layer-radius);
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  position: absolute;
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-active);
  --_glare-op: 0;
  --_blur: var(--s-glass-blur-none);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  opacity: calc(1 - var(--layer-index) * 0.05);
  transform: translate3d(0, 0, 0) scale(1);
  transform-origin: center;
  backface-visibility: hidden;
  transition: opacity var(--d-fast) var(--e-out);
  will-change: transform;
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .l-lab-interface .lab-preview-layer {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.l-lab-interface .lab-preview-layer::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
.l-lab-interface .lab-preview-layer::before {
  opacity: 0;
}

.l-lab-interface .lab-preview-text {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-family: var(--font-mono);
  font-size: clamp(18px, 3vw, 32px);
  letter-spacing: var(--ls-data);
  color: rgba(var(--p-white-rgb), 0.9);
  text-align: center;
  z-index: 2;
  pointer-events: none;
  text-transform: none;
}
.l-lab-interface .ui-info-group + .ui-toggle-tag,
.l-lab-interface .text-subheading + .ui-toggle-tag,
.l-lab-interface .ui-instruction__title + .ui-toggle-tag {
  margin-top: var(--space-md);
}
.l-lab-interface:hover {
  transition-delay: 0s;
  --_bg-op: var(--s-glass-op-hover);
  --_stroke-op: var(--s-stroke-op-active);
  --_blur: var(--s-glass-blur-intense);
  --_glare-op: var(--s-glare-op-hover);
  --_border-shadow:
    inset var(--s-stroke-width) 0 0 0 rgba(var(--m-glass-base-rgb), var(--s-stroke-op-active)),
    inset calc(var(--s-stroke-width) * -1) 0 0 0 rgba(var(--m-glass-base-rgb), var(--s-stroke-op-active)),
    inset 0 calc(var(--s-stroke-width) * -1) 0 0 rgba(var(--m-glass-base-rgb), var(--s-stroke-op-active));
  border-top: none;
  box-shadow: var(--_border-shadow);
}
.l-lab-interface:hover .lab-preview-display {
  --_bg-op: var(--s-glass-op-active);
}

.l-lab-interface.is-lab-ready {
  --_blur: var(--s-glass-blur-intense);
}

.l-lab-interface.is-lab-motion {
  --_blur: var(--s-glass-blur-none);
  --_glare-op: 0;
  visibility: visible;
  opacity: 1;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  transition: transform var(--d-morph) var(--e-out), visibility var(--d-morph) var(--e-out);
}

.l-lab-interface.is-lab-motion:hover {
  --_blur: var(--s-glass-blur-none);
}

.l-lab-interface.is-lab-motion .lab-preview-display {
  --_blur: var(--s-glass-blur-none);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out);
}

.l-lab-interface.is-lab-motion::before {
  opacity: 0;
}

.l-lab-interface.is-lab-motion .lab-preview-display::before,
.l-lab-interface.is-lab-motion .lab-preview-display::after {
  opacity: 0;
}

/* ============================================================
   10. АКТИВАЦИЯ И АДАПТАЦИЯ
   ============================================================ */
.lab-mobile-switch {
  display: none;
}

body.is-lab-active .l-lab-interface {
  visibility: visible;
  pointer-events: all;
  transform: translate3d(-50%, 0, 0);
}
@media (min-width: 1101px) {
  body.is-lab-active .l-lab-interface .l-lab-interface__column {
    transform: translateY(0);
  }
}
body.is-lab-active #app-wrapper {
  filter: blur(var(--s-glass-blur-strong));
  transform: scale(var(--scale-lab-backdrop));
  opacity: var(--opacity-hidden);
  transition: all var(--d-morph) var(--e-out);
}

/* 11. МОБИЛЬНАЯ АДАПТАЦИЯ */
@media (max-width: 1100px) {
  body .l-lab-interface {
    --lab-preview-viewport-scale: 0.7;
  }
  body.is-lab-active {
    overflow: hidden;
    height: 100dvh;
  }
  body .l-lab-interface {
    /* ОБЩИЕ МОБИЛЬНЫЕ СТИЛИ */
    top: 0;
    left: 50%;
    width: min(var(--stable-content-width), var(--stable-max-content));
    height: calc(100dvh - var(--lab-mobile-offset));
    border-radius: 0 0 var(--radius-master) var(--radius-master);
    transform: translate3d(-50%, -100%, 0);
    overflow: hidden;
    position: fixed;
    opacity: 0;
    transition: transform var(--d-morph) var(--e-out), opacity var(--d-fast) var(--e-out);
    --_stroke-op: var(--s-stroke-op-active);
    --_blur: var(--s-glass-blur-none);
    --_bg-op: var(--s-glass-op-active);
    display: grid;
    grid-template-columns: 100%;
    grid-template-rows: var(--lab-mobile-preview-vh) 1fr;
    grid-template-areas: "viewport" "panels";
    /* МОБИЛЬНАЯ ОБВОДКА */
    box-shadow: inset var(--s-stroke-width) 0 0 0 rgba(var(--p-white-rgb), var(--s-stroke-op-active)), inset calc(var(--s-stroke-width) * -1) 0 0 0 rgba(var(--p-white-rgb), var(--s-stroke-op-active)), inset 0 calc(var(--s-stroke-width) * -1) 0 0 rgba(var(--p-white-rgb), var(--s-stroke-op-active));
    /* КОЛОНКИ В МОБИЛЬНОЙ ВЕРСИИ */
    /* ПЕРЕКЛЮЧЕНИЕ ПАНЕЛЕЙ */
  }
  @supports (-webkit-touch-callout: none) {
    body .l-lab-interface {
      height: calc(100svh - var(--lab-mobile-offset));
    }
  }
  body .l-lab-interface__column {
    transform: translateY(var(--space-sm));
    min-height: 0;
    height: 100%;
    opacity: 0;
    transition: transform var(--d-morph) var(--e-out), opacity var(--d-fast) var(--e-out);
  }
  body .l-lab-interface__column--viewport {
    grid-area: viewport;
    padding: 0;
  }
  body .l-lab-interface__column--viewport .lab-preview-display {
    margin-top: 0;
    height: 100%;
    border: none;
    border-radius: 0;
    box-shadow: inset 0 calc(var(--s-stroke-width) * -1) 0 0 rgba(var(--p-white-rgb), var(--s-stroke-op-active));
  }
  body .l-lab-interface__column--viewport .lab-mobile-switch {
    display: flex;
    position: absolute;
    bottom: var(--space-sm);
    left: 50%;
    transform: translateX(-50%);
    gap: var(--space-xs);
    z-index: 100;
  }
  body .l-lab-interface__column--setup, body .l-lab-interface__column--engine {
    grid-area: panels;
  }
  body .l-lab-interface__column--setup .b-lab-column-header, body .l-lab-interface__column--engine .b-lab-column-header {
    display: none;
  }
  body .l-lab-interface__column--setup .b-lab-column-body, body .l-lab-interface__column--engine .b-lab-column-body {
    flex: 1 1 auto;
    width: 100%;
    padding: 0 var(--space-md) var(--lab-mobile-panel-pad);
    overflow-y: auto;
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
    touch-action: pan-y;
    scrollbar-width: none;
    -ms-overflow-style: none;
    mask-image: linear-gradient(to bottom, black 0%, black 90%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, black 0%, black 90%, transparent 100%);
  }
  body .l-lab-interface__column--setup .b-lab-column-body::-webkit-scrollbar, body .l-lab-interface__column--engine .b-lab-column-body::-webkit-scrollbar {
    width: 0;
    height: 0;
  }
  body .l-lab-interface__column--setup .b-lab-column-body::-webkit-scrollbar, body .l-lab-interface__column--engine .b-lab-column-body::-webkit-scrollbar {
    display: none;
  }
  body .l-lab-interface__column--setup .b-lab-column-body .l-flow, body .l-lab-interface__column--engine .b-lab-column-body .l-flow {
    padding-top: var(--space-md);
  }
  body .l-lab-interface[data-mobile-panel=setup] .l-lab-interface__column--engine, body .l-lab-interface[data-mobile-panel=engine] .l-lab-interface__column--setup {
    display: none;
  }
  body.is-lab-active .l-lab-interface {
    opacity: 1;
    transform: translate3d(-50%, 0, 0);
  }
  body.is-lab-active .l-lab-interface__column {
    opacity: 1;
    transform: translateY(0);
  }
}
/* iOS Safari: убираем свечение у превью */
@supports (-webkit-touch-callout: none) {
  .l-lab-interface .lab-preview-display::before,
  .l-lab-interface .lab-preview-display::after {
    opacity: 0;
  }
  .l-lab-interface.is-lab-ready {
    --_blur: var(--s-glass-blur-none);
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
  .l-lab-interface.is-lab-ready .lab-preview-display {
    --_blur: var(--s-glass-blur-none);
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}
/* ============================================================
5-COMPONENTS / _UI-CONTROLS.SCSS
Batura Library | Atomic Controls [Surgical Divider Sync]
============================================================ */
/* 1. UI-RANGE: Инженерный ползунок */
.ui-range {
  width: 100%;
  min-width: 0;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin-bottom: var(--space-md);
  --_local-stroke-op: var(--s-stroke-op-idle);
  --_local-text-op: var(--s-text-op-idle);
  transition: opacity var(--d-fast) var(--e-out);
  /* ЛОГИКА СОСТОЯНИЙ (ПК + Общая) */
  /* Прокидываем состояния на родительский контейнер для трека и текста */
  /* Обычный ховер для родителя на ПК */
}
.ui-range > * + * {
  margin-top: var(--space-xs);
}
.ui-range > .text-data + .text-hero, .ui-range > .b-code-box__content + .text-hero, .ui-range > .ui-info-tag + .text-hero, .ui-range > .ui-range__header + .text-hero, .ui-range > small + .text-hero, .b-navbar__search .ui-range > input + .text-hero, .ui-range > .ui-button + .text-hero, .b-accordion .ui-range > .b-static-card__deco + .text-hero, .ui-range > .b-static-card__index + .text-hero, .ui-range > .b-alphabet-nav__char + .text-hero, .b-catalog-header .ui-range > .index + .text-hero, .ui-range > .text-data + h1, .ui-range > .b-code-box__content + h1, .ui-range > .ui-info-tag + h1, .ui-range > .ui-range__header + h1, .ui-range > small + h1, .b-navbar__search .ui-range > input + h1, .ui-range > .ui-button + h1, .b-accordion .ui-range > .b-static-card__deco + h1, .ui-range > .b-static-card__index + h1, .ui-range > .b-alphabet-nav__char + h1, .b-catalog-header .ui-range > .index + h1, .ui-range > .text-data + .text-heading, .ui-range > .b-code-box__content + .text-heading, .ui-range > .ui-info-tag + .text-heading, .ui-range > .ui-range__header + .text-heading, .ui-range > small + .text-heading, .b-navbar__search .ui-range > input + .text-heading, .ui-range > .ui-button + .text-heading, .b-accordion .ui-range > .b-static-card__deco + .text-heading, .ui-range > .b-static-card__index + .text-heading, .ui-range > .b-alphabet-nav__char + .text-heading, .b-catalog-header .ui-range > .index + .text-heading, .ui-range > .text-data + h2, .ui-range > .b-code-box__content + h2, .ui-range > .ui-info-tag + h2, .ui-range > .ui-range__header + h2, .ui-range > small + h2, .b-navbar__search .ui-range > input + h2, .ui-range > .ui-button + h2, .b-accordion .ui-range > .b-static-card__deco + h2, .ui-range > .b-static-card__index + h2, .ui-range > .b-alphabet-nav__char + h2, .b-catalog-header .ui-range > .index + h2, .ui-range > .text-hero + .text-body, .ui-instruction .ui-range > .text-hero + .text-info-hint, .ui-range > h1 + .text-body, .ui-instruction .ui-range > h1 + .text-info-hint, .ui-range > .text-hero + p, .ui-range > h1 + p, .ui-range > .text-heading + .text-body, .ui-instruction .ui-range > .text-heading + .text-info-hint, .ui-range > h2 + .text-body, .ui-instruction .ui-range > h2 + .text-info-hint, .ui-range > .text-heading + p, .ui-range > h2 + p {
  margin-top: var(--space-xs);
}
.ui-range > .text-body + .l-flex-group, .ui-instruction .ui-range > .text-info-hint + .l-flex-group, .ui-range > p + .l-flex-group {
  margin-top: var(--space-lg);
}
.ui-range__header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  width: 100%;
}
.ui-range__header .value {
  color: rgba(var(--p-white-rgb), var(--_local-text-op));
  font-weight: 500;
  transition: color var(--d-fast) var(--e-out);
  cursor: text;
  min-width: 3ch;
  text-align: right;
  outline: none;
  position: relative;
}
@media (hover: hover) {
  .ui-range__header .value:hover {
    --_local-text-op: 1;
  }
}
.ui-range__header .value:focus {
  --_local-text-op: 1;
  color: rgba(var(--p-white-rgb), 1);
}
@media (hover: hover) and (pointer: fine) {
  .ui-range__header .value.is-dragging {
    cursor: ew-resize;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
}
.ui-range__header .value:focus {
  --_local-text-op: 1;
  color: rgba(var(--p-white-rgb), 1);
}
.ui-range input[type=range] {
  -webkit-appearance: none;
  -moz-appearance: none;
       appearance: none;
  width: 100%;
  height: var(--ui-range-h);
  background: transparent;
  cursor: pointer;
  outline: none;
  display: block;
  -webkit-tap-highlight-color: transparent;
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
  touch-action: none; /* Запрет скролла при перетаскивании */
  /* --- ТРЕК --- */
  /* --- КРУЖОЧЕК (THUMB) --- */
  /* ХОВЕР (ТОЛЬКО ПК) */
  /* АКТИВНОЕ СОСТОЯНИЕ (ЗАЖАТИЕ) — РАБОТАЕТ И НА ПК, И НА ТЕЛЕФОНЕ */
}
.ui-range input[type=range]::-webkit-slider-runnable-track {
  width: 100%;
  height: var(--ui-range-track-h);
  background: transparent;
  border: none;
  box-shadow: inset 0 calc(var(--s-stroke-width) * -1) 0 0 rgba(var(--m-glass-base-rgb), var(--_local-stroke-op));
  -webkit-transition: box-shadow var(--d-fast) var(--e-out);
  transition: box-shadow var(--d-fast) var(--e-out);
}
.ui-range input[type=range]::-moz-range-track {
  width: 100%;
  height: var(--ui-range-track-h);
  background: transparent;
  border: none;
  box-shadow: inset 0 calc(var(--s-stroke-width) * -1) 0 0 rgba(var(--m-glass-base-rgb), var(--_local-stroke-op));
  -moz-transition: box-shadow var(--d-fast) var(--e-out);
  transition: box-shadow var(--d-fast) var(--e-out);
}
.ui-range input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  height: var(--ui-range-thumb);
  width: var(--ui-range-thumb);
  border-radius: 50%;
  position: relative;
  border-radius: 50%;
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  -webkit-transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  --_bg-op: 1;
  --_stroke-op: 0.3;
  margin-top: var(--ui-range-thumb-offset);
  -webkit-transition: transform var(--d-fast) var(--e-out), background var(--d-fast) var(--e-out);
  transition: transform var(--d-fast) var(--e-out), background var(--d-fast) var(--e-out);
  will-change: transform;
  border: none;
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .ui-range input[type=range]::-webkit-slider-thumb {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.ui-range input[type=range]::-webkit-slider-thumb::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  -webkit-transition: opacity var(--d-fast) var(--e-out);
  transition: opacity var(--d-fast) var(--e-out);
}
.ui-range input[type=range]::-moz-range-thumb {
  border: none;
  height: var(--ui-range-thumb);
  width: var(--ui-range-thumb);
  border-radius: 50%;
  position: relative;
  border-radius: 50%;
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  -moz-transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  --_bg-op: 1;
  --_stroke-op: 0.3;
  -moz-transition: transform var(--d-fast) var(--e-out);
  transition: transform var(--d-fast) var(--e-out);
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .ui-range input[type=range]::-moz-range-thumb {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.ui-range input[type=range]::-moz-range-thumb::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  -moz-transition: opacity var(--d-fast) var(--e-out);
  transition: opacity var(--d-fast) var(--e-out);
}
@media (hover: hover) {
  .ui-range input[type=range]:hover:not(:active)::-webkit-slider-thumb {
    transform: scale(var(--scale-thumb-hover));
  }
  .ui-range input[type=range]:hover:not(:active)::-moz-range-thumb {
    transform: scale(var(--scale-thumb-hover));
  }
}
.ui-range input[type=range]:active ~ .ui-range__header {
  --_local-text-op: 1;
}
.ui-range input[type=range]:active::-webkit-slider-thumb {
  transform: scale(var(--scale-thumb-active)) !important;
}
.ui-range input[type=range]:active::-moz-range-thumb {
  transform: scale(var(--scale-thumb-active)) !important;
}
.ui-range:has(input[type=range]:active) {
  --_local-stroke-op: var(--s-stroke-op-active);
  --_local-text-op: 1;
}
.ui-range.is-active {
  --_local-stroke-op: var(--s-stroke-op-active);
  --_local-text-op: 1;
}
.ui-range.is-active input[type=range]::-webkit-slider-runnable-track, .ui-range.is-active input[type=range]::-moz-range-track {
  background-color: rgba(var(--p-white-rgb), 1);
  box-shadow: none;
}
.ui-range.is-active input[type=range]::-webkit-slider-thumb, .ui-range.is-active input[type=range]::-moz-range-thumb {
  transform: scale(var(--scale-thumb-active)) !important;
}
@media (hover: hover) {
  .ui-range:hover {
    --_local-stroke-op: var(--s-stroke-op-hover);
    --_local-text-op: var(--s-text-op-hover);
  }
}

/* 2. UI-INFO: Группа заголовка и морфинг */
.l-lab-interface .ui-info-group {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  width: 100%;
  position: relative;
}
.l-lab-interface .ui-info-group__header {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: baseline;
  width: 100%;
}
.l-lab-interface .ui-info-group__description {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows var(--d-morph) var(--e-out), margin-top var(--d-morph) var(--e-out);
  overflow: hidden;
  width: 100%;
}
.l-lab-interface .ui-info-group__description .description-inner {
  min-height: 0;
  opacity: var(--opacity-hidden);
  transform: translateY(var(--opt-info-shift));
  transition: opacity var(--d-fast) var(--e-out), transform var(--d-base) var(--e-out);
}
.l-lab-interface .ui-info-group.is-info-active .ui-info-group__description {
  grid-template-rows: 1fr;
  margin-top: var(--space-sm);
}
.l-lab-interface .ui-info-group.is-info-active .ui-info-group__description .description-inner {
  opacity: var(--opacity-visible);
  transform: translateY(0);
  transition-delay: 0.1s;
}

.ui-info-tag {
  cursor: help;
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
  margin-left: var(--space-xs);
  display: inline-block;
  --_local-tag-op: var(--s-text-op-idle);
  color: rgba(var(--p-white-rgb), var(--_local-tag-op));
  transition: color var(--d-fast) var(--e-out);
  -webkit-tap-highlight-color: transparent;
}
@media (hover: hover) {
  .ui-info-tag:hover {
    --_local-tag-op: 1;
  }
}
.ui-info-tag:active {
  --_local-tag-op: 1;
}

/* ============================================================
[UI ADAPTATION BLOCK] - Вынесен отдельно
============================================================ */
@media (max-width: 1100px) {
  .ui-range input[type=range] {
    height: var(--ui-range-h-mobile);
  }
  .ui-range input[type=range]::-webkit-slider-runnable-track {
    height: var(--s-stroke-width);
    background-color: rgba(var(--m-glass-base-rgb), var(--_local-stroke-op));
    box-shadow: none;
    -webkit-transition: background-color var(--d-fast) var(--e-out);
    transition: background-color var(--d-fast) var(--e-out);
  }
  .ui-range input[type=range]::-webkit-slider-thumb {
    height: var(--ui-range-thumb-mobile);
    width: var(--ui-range-thumb-mobile);
    margin-top: calc(var(--s-stroke-width) / 2 - var(--ui-range-thumb-mobile) / 2);
    box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), 0.3);
  }
  .ui-range.is-active {
    --_local-stroke-op: var(--s-stroke-op-active);
    --_local-text-op: 1;
  }
  .ui-range.is-active input[type=range]::-webkit-slider-thumb {
    transform: scale(var(--scale-thumb-active-mobile)) !important;
  }
  .ui-info-tag {
    padding: var(--opt-touch-pad);
    margin: calc(var(--opt-touch-pad) * -1) calc(var(--opt-touch-pad) * -1) calc(var(--opt-touch-pad) * -1) 0;
  }
  .ui-info-tag:not(:active) {
    --_local-tag-op: var(--s-text-op-idle);
  }
}
/* iOS: увеличиваем область захвата ползунка */
@supports (-webkit-touch-callout: none) {
  @media (max-width: 1100px) {
    .ui-range input[type=range] {
      height: calc(var(--ui-range-h-mobile) + 24px);
      touch-action: pan-x;
    }
  }
}
/* ============================================================
   5-COMPONENTS / _UI-EXPRESSION.SCSS
   Batura Library | Mandatory Engine Symmetry & Top Align
   ============================================================ */
/**
 * 1. ENGINE RHYTHM & ALIGNMENT
 * Настраиваем ритм правой колонки и убираем лишнее пространство сверху.
 */
.l-lab-interface__column--engine .l-flow {
  --_rhythm: var(--space-md);
}
.l-lab-interface__column--engine .l-flow > *:first-child {
  margin-top: 0;
}
.l-lab-interface__column--engine .l-flow .ui-tabs-group + .b-code-box {
  margin-top: var(--_rhythm);
}
.l-lab-interface__column--engine .l-flow .b-code-box + .ui-button {
  margin-top: var(--_rhythm);
}

/**
 * 2. CODE BOX
 */
.b-code-box {
  --_code-radius: calc(var(--radius-master) - (var(--space-md) * 0.5));
  aspect-ratio: auto;
  width: 100%;
  min-height: var(--codebox-max-h);
  max-height: var(--codebox-max-h);
  height: var(--codebox-max-h);
  padding: var(--space-md);
  margin: 0;
  overflow: hidden;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
  border-radius: var(--_code-radius);
  position: relative;
  border-radius: var(--_code-radius);
  isolation: isolate;
  background-clip: padding-box;
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  /* УДАЛИЛИ transition-delay отсюда, чтобы не было конфликтов */
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out);
  transition: background-color var(--d-fast) var(--e-out), box-shadow var(--d-fast) var(--e-out), backdrop-filter var(--d-morph) var(--e-out), border-radius var(--d-morph) var(--e-out), -webkit-backdrop-filter var(--d-morph) var(--e-out);
}
@supports not (((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) or (-webkit-backdrop-filter: blur(1px))) {
  .b-code-box {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
}
.b-code-box::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
  opacity: var(--_glare-op, 0);
  transition: opacity var(--d-fast) var(--e-out);
}
.b-code-box__content {
  font-size: var(--fs-code);
  line-height: var(--lh-code);
  text-transform: none;
  letter-spacing: var(--ls-data);
  white-space: pre-wrap;
  max-height: calc(var(--codebox-max-h) - (var(--space-md) * 2));
  overflow: auto;
  overscroll-behavior: contain;
  scroll-behavior: smooth;
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
  -webkit-user-select: all;
     -moz-user-select: all;
          user-select: all;
}
.b-code-box__content::-webkit-scrollbar {
  width: 0;
  height: 0;
}

/**
 * 3. TABS GROUP
 */
.ui-tabs-group {
  display: flex;
  width: 100%;
  gap: var(--space-xs);
  margin: 0;
}
.ui-tabs-group .ui-button {
  flex: 1;
  transition-delay: 0s;
  --_stroke-op: var(--s-stroke-op-idle);
  --_bg-op: var(--s-glass-op-base);
}
.ui-tabs-group .ui-button.is-active {
  --_stroke-op: var(--s-stroke-op-active);
  --_text-op: 1;
  --_bg-op: var(--s-glass-op-active);
  backdrop-filter: blur(var(--s-glass-blur-strong));
  -webkit-backdrop-filter: blur(var(--s-glass-blur-strong));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--s-stroke-op-active));
}
.ui-tabs-group .ui-button:hover:not(.is-active) {
  --_stroke-op: var(--s-stroke-op-hover);
  --_bg-op: var(--s-glass-op-hover);
}
.text-subheading + .ui-tabs-group {
  margin-top: var(--space-md);
}
.ui-info-group + .ui-tabs-group {
  margin-top: var(--space-md);
}

/**
 * 4. COPY BUTTON
 */
.ui-button.is-full-width {
  width: 100%;
  margin: 0;
  position: relative;
  padding-top: 0;
}

.ui-button.is-full-width.is-copied,
.ui-button.is-full-width:hover,
.ui-button.is-full-width:focus-visible {
  --_bg-op: var(--s-glass-op-active);
  --_stroke-op: var(--s-stroke-op-active);
  --_text-op: 1;
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--s-stroke-op-active));
  backdrop-filter: blur(var(--s-glass-blur-strong));
  -webkit-backdrop-filter: blur(var(--s-glass-blur-strong));
}

.ui-button.is-full-width::after {
  content: attr(data-feedback);
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  line-height: 1;
  font: inherit;
  letter-spacing: inherit;
  text-transform: inherit;
  pointer-events: none;
}

.ui-button.is-full-width.is-copied::after {
  opacity: 1;
}

.ui-button.is-full-width.is-copied span {
  visibility: hidden;
}

/**
 * 5. INSTRUCTION
 */
.ui-instruction {
  width: 100%;
  /* --- 1. ОТСТУП СВЕРХУ БЛОКА (от предыдущего контента) --- */
  margin-top: var(--space-md);
  /* --- 2. ЛИНИЯ + ОТСТУП ДО ЗАГОЛОВКА --- */
  padding-top: var(--space-md);
  border-top: var(--s-stroke-width) solid rgba(var(--p-white-rgb), var(--s-stroke-op-idle));
}
.ui-instruction__title {
  display: block;
  margin: 0;
  line-height: var(--lh-tight);
  /* --- 3. ЕДИНСТВЕННЫЙ ОТСТУП ДО ОПИСАНИЯ --- */
  margin-bottom: var(--space-sm);
}
.ui-instruction__content {
  /* ВАЖНО: здесь больше НЕТ margin-top */
  margin: 0;
}
.ui-instruction .text-info-hint {
  margin: 0;
  max-width: var(--measure-narrow);
  /* --- 4. ОТСТУП МЕЖДУ ПУНКТАМИ --- */
}
.ui-instruction .text-info-hint + .text-info-hint {
  margin-top: var(--space-xs);
}/*# sourceMappingURL=main.css.map */