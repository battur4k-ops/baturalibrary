@mixin glass-surface($radius: var(--radius-master)) {
  position: relative;
  border-radius: $radius;
  isolation: isolate; 
  background-clip: padding-box; 
  background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op, var(--s-glass-op-base)));
  box-shadow: inset 0 0 0 var(--s-stroke-width) rgba(var(--m-glass-base-rgb), var(--_stroke-op, var(--s-stroke-op-idle)));
  
  backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));
  -webkit-backdrop-filter: blur(var(--_blur, var(--s-glass-blur)));

  @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background-color: rgba(var(--m-glass-base-rgb), var(--_bg-op-fallback, var(--s-glass-op-base)));
  }
  
  transition: 
    background-color var(--d-fast) var(--e-out),
    box-shadow var(--d-fast) var(--e-out),
    backdrop-filter var(--d-morph) var(--e-out),
    border-radius var(--d-morph) var(--e-out);

  &::before {
    content: '';
    position: absolute; inset: 0;
    border-radius: inherit;
    pointer-events: none;
    z-index: -1;
    background: radial-gradient(circle at 50% 0%, rgba(var(--m-glass-base-rgb), 0.4), transparent);
    opacity: var(--_glare-op, 0);
    transition: opacity var(--d-fast) var(--e-out);
  }
}

@mixin glass-panel($radius: var(--radius-master)) {
  @include glass-surface($radius);
}

@mixin glass-interactive($radius: var(--radius-master)) {
  @include glass-surface($radius);
}

@mixin glass-border-shadow($opacity: var(--_stroke-op, var(--s-stroke-op-idle))) {
  --_border-shadow:
    inset var(--s-stroke-width) 0 0 0 rgba(var(--m-glass-base-rgb), #{$opacity}),
    inset calc(var(--s-stroke-width) * -1) 0 0 0 rgba(var(--m-glass-base-rgb), #{$opacity}),
    inset 0 calc(var(--s-stroke-width) * -1) 0 0 rgba(var(--m-glass-base-rgb), #{$opacity});
  border-top: none;
  box-shadow: var(--_border-shadow);
}

@mixin glass-dots($opacity: var(--m-dot-op)) {
  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: radial-gradient(rgba(var(--p-white-rgb), #{$opacity}) var(--m-dot-size), transparent var(--m-dot-size));
    background-size: var(--space-sm) var(--space-sm);
    opacity: var(--m-dot-layer-op);
    mix-blend-mode: overlay;
    pointer-events: none;
    z-index: 2;
  }
}

@mixin glass-thumb {
  @include glass-surface(50%);
  --_bg-op: 1;
  --_stroke-op: 0.3;
}